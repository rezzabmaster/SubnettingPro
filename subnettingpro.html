
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Subnetting Pro - Complete Subnet Calculator</title>
    <meta name="description" content="Free offline subnetting calculator with practice modes, wildcard masks, and complete subnet analysis">
    
    <!-- All CSS embedded inline -->
    <style>
        /*! tailwindcss v2.2.19 | MIT License | https://tailwindcss.com *//*! modern-normalize v1.1.0 | MIT License | https://github.com/sindresorhus/modern-normalize */*,::after,::before{box-sizing:border-box}html{-moz-tab-size:4;tab-size:4}html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}body{font-family:system-ui,-apple-system,'Segoe UI',Roboto,Helvetica,Arial,sans-serif,'Apple Color Emoji','Segoe UI Emoji'}strong{font-weight:bolder}button,input,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button{text-transform:none}[type=button],button{-webkit-appearance:button}::-moz-focus-inner{border-style:none;padding:0}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}h1,h2,h3,p{margin:0}button{background-color:transparent;background-image:none}ul{list-style:none;margin:0;padding:0}html{font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}body{font-family:inherit;line-height:inherit}*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:currentColor}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button{cursor:pointer}h1,h2,h3{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,textarea{padding:0;line-height:inherit;color:inherit}svg{display:block;vertical-align:middle}[hidden]{display:none}*,::after,::before{--tw-border-opacity:1;border-color:rgba(229,231,235,var(--tw-border-opacity))}.visible{visibility:visible}.fixed{position:fixed}.inset-0{top:0;right:0;bottom:0;left:0}.z-50{z-index:50}.mx-auto{margin-left:auto;margin-right:auto}.mt-0{margin-top:0}.mt-2{margin-top:.5rem}.mt-4{margin-top:1rem}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-6{margin-bottom:1.5rem}.ml-2{margin-left:.5rem}.block{display:block}.flex{display:flex}.grid{display:grid}.hidden{display:none}.h-4{height:1rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-8{height:2rem}.min-h-screen{min-height:100vh}.w-4{width:1rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-8{width:2rem}.w-20{width:5rem}.w-full{width:100%}.max-w-2xl{max-width:42rem}.max-w-7xl{max-width:80rem}.flex-1{flex:1 1 0%}.transform{--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;transform:translateX(var(--tw-translate-x)) translateY(var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes spin{to{transform:rotate(360deg)}}@keyframes ping{100%,75%{transform:scale(2);opacity:0}}@keyframes pulse{50%{opacity:.5}}@keyframes bounce{0%,100%{transform:translateY(-25%);animation-timing-function:cubic-bezier(0.8,0,1,1)}50%{transform:none;animation-timing-function:cubic-bezier(0,0,0.2,1)}}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.flex-col{flex-direction:column}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.space-x-8>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-right:calc(2rem * var(--tw-space-x-reverse));margin-left:calc(2rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-6>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:.25rem}.rounded-lg{border-radius:.5rem}.rounded-full{border-radius:9999px}.border-2{border-width:2px}.border{border-width:1px}.border-b-2{border-bottom-width:2px}.border-b{border-bottom-width:1px}.border-transparent{border-color:transparent}.border-gray-200{--tw-border-opacity:1;border-color:rgba(229,231,235,var(--tw-border-opacity))}.border-gray-300{--tw-border-opacity:1;border-color:rgba(209,213,219,var(--tw-border-opacity))}.border-blue-200{--tw-border-opacity:1;border-color:rgba(191,219,254,var(--tw-border-opacity))}.border-blue-600{--tw-border-opacity:1;border-color:rgba(37,99,235,var(--tw-border-opacity))}.bg-black{--tw-bg-opacity:1;background-color:rgba(0,0,0,var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity:1;background-color:rgba(255,255,255,var(--tw-bg-opacity))}.bg-gray-50{--tw-bg-opacity:1;background-color:rgba(249,250,251,var(--tw-bg-opacity))}.bg-gray-100{--tw-bg-opacity:1;background-color:rgba(243,244,246,var(--tw-bg-opacity))}.bg-gray-200{--tw-bg-opacity:1;background-color:rgba(229,231,235,var(--tw-bg-opacity))}.bg-gray-600{--tw-bg-opacity:1;background-color:rgba(75,85,99,var(--tw-bg-opacity))}.bg-green-600{--tw-bg-opacity:1;background-color:rgba(5,150,105,var(--tw-bg-opacity))}.bg-green-700{--tw-bg-opacity:1;background-color:rgba(4,120,87,var(--tw-bg-opacity))}.bg-blue-50{--tw-bg-opacity:1;background-color:rgba(239,246,255,var(--tw-bg-opacity))}.bg-blue-100{--tw-bg-opacity:1;background-color:rgba(219,234,254,var(--tw-bg-opacity))}.bg-blue-600{--tw-bg-opacity:1;background-color:rgba(37,99,235,var(--tw-bg-opacity))}.bg-blue-700{--tw-bg-opacity:1;background-color:rgba(29,78,216,var(--tw-bg-opacity))}.bg-opacity-50{--tw-bg-opacity:0.5}.p-2{padding:.5rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.px-1{padding-left:.25rem;padding-right:.25rem}.px-3{padding-left:.75rem;padding-right:.25rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-8{padding-top:2rem;padding-bottom:2rem}.text-center{text-align:center}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}.text-xs{font-size:.75rem;line-height:1rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-2xl{font-size:1.5rem;line-height:2rem}.font-medium{font-weight:500}.font-bold{font-weight:700}.text-white{--tw-text-opacity:1;color:rgba(255,255,255,var(--tw-text-opacity))}.text-gray-500{--tw-text-opacity:1;color:rgba(107,114,128,var(--tw-text-opacity))}.text-gray-600{--tw-text-opacity:1;color:rgba(75,85,99,var(--tw-text-opacity))}.text-gray-700{--tw-text-opacity:1;color:rgba(55,65,81,var(--tw-text-opacity))}.text-gray-800{--tw-text-opacity:1;color:rgba(31,41,55,var(--tw-text-opacity))}.text-gray-900{--tw-text-opacity:1;color:rgba(17,24,39,var(--tw-text-opacity))}.text-red-600{--tw-text-opacity:1;color:rgba(220,38,38,var(--tw-text-opacity))}.text-green-600{--tw-text-opacity:1;color:rgba(5,150,105,var(--tw-text-opacity))}.text-blue-600{--tw-text-opacity:1;color:rgba(37,99,235,var(--tw-text-opacity))}.text-blue-800{--tw-text-opacity:1;color:rgba(30,64,175,var(--tw-text-opacity))}.text-blue-900{--tw-text-opacity:1;color:rgba(30,58,138,var(--tw-text-opacity))}*,::after,::before{--tw-shadow:0 0 #0000}.shadow-sm{--tw-shadow:0 1px 2px 0 rgba(0, 0, 0, 0.05);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow{--tw-shadow:0 1px 3px 0 rgba(0, 0, 0, 0.1),0 1px 2px 0 rgba(0, 0, 0, 0.06);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}*,::after,::before{--tw-ring-inset:var(--tw-empty, );/*!*//*!*/--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59, 130, 246, 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000}.ring-2{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.ring-blue-500{--tw-ring-opacity:1;--tw-ring-color:rgba(59, 130, 246, var(--tw-ring-opacity))}.transition{transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:background-color,border-color,color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4,0,0.2,1);transition-duration:150ms}.ease-in{transition-timing-function:cubic-bezier(0.4,0,1,1)}.hover\:bg-gray-700:hover{--tw-bg-opacity:1;background-color:rgba(55,65,81,var(--tw-bg-opacity))}.hover\:bg-gray-100:hover{--tw-bg-opacity:1;background-color:rgba(243,244,246,var(--tw-bg-opacity))}.hover\:text-gray-700:hover{--tw-text-opacity:1;color:rgba(55,65,81,var(--tw-text-opacity))}.hover\:border-blue-600:hover{--tw-border-opacity:1;border-color:rgba(37,99,235,var(--tw-border-opacity))}.hover\:bg-blue-700:hover{--tw-bg-opacity:1;background-color:rgba(29,78,216,var(--tw-bg-opacity))}.hover\:bg-green-700:hover{--tw-bg-opacity:1;background-color:rgba(4,120,87,var(--tw-bg-opacity))}.focus\:ring-2:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow,0 0 #0000)}.focus\:ring-blue-500:focus{--tw-ring-color:rgba(59,130,246,var(--tw-ring-opacity))}.focus\:border-transparent:focus{border-color:transparent}
        
        /* Custom Styles - Mobile First */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            transition: background-color 0.3s, color 0.3s;
            font-size: 16px; /* Prevents zoom on iOS */
        }
        
        .max-h-\[90vh\] {
            max-height: 90vh;
        }

        /* Mobile Responsive Overrides */
        @media (max-width: 640px) {
            .max-w-7xl {
                max-width: 100% !important;
            }
            
            .px-4 {
                padding-left: 1rem !important;
                padding-right: 1rem !important;
            }
            
            .py-8 {
                padding-top: 1.5rem !important;
                padding-bottom: 1.5rem !important;
            }
            
            .space-x-8 > :not([hidden]) ~ :not([hidden]) {
                --tw-space-x-reverse: 0;
                margin-right: calc(1rem * var(--tw-space-x-reverse)) !important;
                margin-left: calc(1rem * calc(1 - var(--tw-space-x-reverse))) !important;
            }
            
            .text-2xl {
                font-size: 1.25rem !important;
                line-height: 1.75rem !important;
            }
            
            .py-4 {
                padding-top: 0.75rem !important;
                padding-bottom: 0.75rem !important;
            }
            
            .px-1 {
                padding-left: 0.5rem !important;
                padding-right: 0.5rem !important;
            }
            
            /* Make inputs and buttons more touch-friendly */
            input, button {
                min-height: 44px !important;
                font-size: 16px !important; /* Prevents zoom */
            }
            
            .px-3 {
                padding-left: 0.75rem !important;
                padding-right: 0.75rem !important;
            }
            
            .py-2 {
                padding-top: 0.75rem !important;
                padding-bottom: 0.75rem !important;
            }
            
            /* Stack difficulty buttons vertically on small screens */
            .difficulty-btn, .wildcard-difficulty-btn {
                flex: 1 !important;
                min-width: 80px !important;
            }
            
            /* Improve grid layouts */
            .grid-cols-2 {
                grid-template-columns: repeat(1, minmax(0, 1fr)) !important;
            }
            
            .grid-cols-3 {
                grid-template-columns: repeat(1, minmax(0, 1fr)) !important;
            }
            
            .grid-cols-4 {
                grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
            }
            
            /* Better spacing for mobile */
            .gap-4 {
                gap: 0.75rem !important;
            }
            
            .gap-3 {
                gap: 0.5rem !important;
            }
            
            .gap-2 {
                gap: 0.25rem !important;
            }
            
            .mb-6 {
                margin-bottom: 1rem !important;
            }
            
            .p-6 {
                padding: 1rem !important;
            }
            
            /* Modal adjustments for mobile */
            .max-w-2xl {
                max-width: 95% !important;
                margin: 1rem !important;
            }
            
            .max-h-\[90vh\] {
                max-height: 85vh !important;
            }
        }
        
        /* Extra small screens */
        @media (max-width: 360px) {
            .px-4 {
                padding-left: 0.5rem !important;
                padding-right: 0.5rem !important;
            }
            
            .text-sm {
                font-size: 0.75rem !important;
                line-height: 1rem !important;
            }
            
            .py-1 {
                padding-top: 0.5rem !important;
                padding-bottom: 0.5rem !important;
            }
            
            .px-3 {
                padding-left: 0.5rem !important;
                padding-right: 0.5rem !important;
            }
        }
        
        /* Dark Mode Styles */
        body.dark-mode {
            background-color: #1a1a1a;
            color: #ffffff;
        }
        
        body.dark-mode .bg-white {
            background-color: #2d2d2d !important;
        }
        
        body.dark-mode .bg-gray-50 {
            background-color: #252525 !important;
        }
        
        body.dark-mode .bg-gray-100 {
            background-color: #2d2d2d !important;
        }
        
        body.dark-mode .bg-blue-50 {
            background-color: #1e3a5f !important;
        }
        
        body.dark-mode .border-gray-200,
        body.dark-mode .border-gray-300 {
            border-color: #404040 !important;
        }
        
        body.dark-mode .border-blue-200 {
            border-color: #2563eb !important;
        }
        
        body.dark-mode .text-gray-900 {
            color: #ffffff !important;
        }
        
        body.dark-mode .text-gray-800 {
            color: #f3f4f6 !important;
        }
        
        body.dark-mode .text-gray-700 {
            color: #d1d5db !important;
        }
        
        body.dark-mode .text-gray-600 {
            color: #9ca3af !important;
        }
        
        body.dark-mode .text-gray-500 {
            color: #6b7280 !important;
        }
        
        body.dark-mode .text-blue-800 {
            color: #93c5fd !important;
        }
        
        body.dark-mode .text-blue-900 {
            color: #bfdbfe !important;
        }
        
        body.dark-mode input,
        body.dark-mode textarea {
            background-color: #2d2d2d !important;
            color: #ffffff !important;
            border-color: #404040 !important;
        }
        
        body.dark-mode input::placeholder {
            color: #6b7280 !important;
        }
        
        body.dark-mode button:not(.bg-blue-600):not(.bg-green-600):not(.bg-blue-100) {
            background-color: #2d2d2d !important;
            color: #ffffff !important;
        }
        
        body.dark-mode .hover\:bg-gray-100:hover {
            background-color: #404040 !important;
        }
        
        body.dark-mode .hover\:bg-gray-200:hover {
            background-color: #4b5563 !important;
        }
        
        body.dark-mode .shadow,
        body.dark-mode .shadow-sm {
            box-shadow: 0 1px 3px 0 rgba(255, 255, 255, 0.1), 0 1px 2px 0 rgba(255, 255, 255, 0.06) !important;
        }
        
        /* Light Mode Specific */
        body:not(.dark-mode) {
            background-color: #f9fafb;
            color: #111827;
        }
        
        /* Tab Styling */
        .tab-active {
            border-bottom: 2px solid #2563eb !important;
            color: #2563eb !important;
            --tw-text-opacity: 1;
        }
        
        .field-correct {
            border-color: #10b981 !important;
            border-width: 2px !important;
        }
        
        .field-incorrect {
            border-color: #ef4444 !important;
            border-width: 2px !important;
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Ensure buttons stay visible */
        .bg-blue-600 {
            background-color: #2563eb !important;
            color: white !important;
        }
        
        .bg-green-600 {
            background-color: #10b981 !important;
            color: white !important;
        }
        
        /* Modal overlay */
        body.dark-mode #help-modal,
        body.dark-mode #subnet-list-modal {
            background-color: rgba(0, 0, 0, 0.75);
        }
        
        body.dark-mode #help-modal .bg-white,
        body.dark-mode #subnet-list-modal .bg-white {
            background-color: #2d2d2d !important;
        }

        /* Custom style for the tutorial table */
        .tutorial-table-header {
            font-weight: 500;
            color: #111827;
        }
        body.dark-mode .tutorial-table-header {
            color: #f3f4f6;
        }
        .tutorial-table-row > div {
            padding: 0.5rem 0.75rem;
        }

        /* For screen readers */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Styles for Flashcards Tab */
        #flashcards-tab-content {
            --slate-900: #0f172a;
            --slate-700: #334155;
            --slate-600: #475569;
            --slate-400: #94a3b8;
            --slate-300: #cbd5e1;
            --slate-200: #e2e8f0;
            --slate-800: #1e293b;
            --sky-300: #7dd3fc;
            --sky-400: #38bdf8;
            --sky-500: #0ea5e9;
            --sky-600: #0284c7;
            --sky-900: #0c4a6e;
            --green-500: #22c55e;
            --yellow-500: #eab308;
            --red-500: #ef4444;
            --white: #ffffff;
            
            background-color: var(--slate-900);
            color: var(--white);
            border-radius: 0.5rem;
            position: relative;
            overflow: hidden;
            padding: 1rem;
        }

        #flashcards-tab-content .fc-background-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(to right, rgba(51, 65, 85, 0.2) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(51, 65, 85, 0.2) 1px, transparent 1px);
            background-size: 2rem 2rem;
            mask-image: linear-gradient(to bottom, white 5%, transparent 90%);
        }

        #flashcards-tab-content .fc-content-wrapper {
            position: relative;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            padding: 1.5rem 0;
        }

        #flashcards-tab-content header { text-align: center; margin-bottom: 1.5rem; }
        #flashcards-tab-content h1 { font-size: 2.25rem; line-height: 2.5rem; font-weight: 700; color: var(--sky-400); }
        #flashcards-tab-content p { color: var(--slate-400); margin-top: 0.5rem; font-size: 1.125rem; line-height: 1.75rem; }
        #flashcards-tab-content .fc-difficulty-selector { display: flex; align-items: center; justify-content: center; gap: 1rem; margin: 2rem 0; }
        #flashcards-tab-content .fc-difficulty-button { padding: 0.5rem 1.5rem; font-size: 0.875rem; font-weight: 600; border-radius: 9999px; transition: all 0.3s ease; border: none; cursor: pointer; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1); background-color: var(--slate-700); color: var(--slate-300); }
        #flashcards-tab-content .fc-difficulty-button:focus { outline: 2px solid transparent; outline-offset: 2px; }
        #flashcards-tab-content .fc-difficulty-button.easy:not(.active):hover { background-color: rgba(34, 197, 94, 0.5); color: white; }
        #flashcards-tab-content .fc-difficulty-button.medium:not(.active):hover { background-color: rgba(234, 179, 8, 0.5); color: white; }
        #flashcards-tab-content .fc-difficulty-button.hard:not(.active):hover { background-color: rgba(239, 68, 68, 0.5); color: white; }
        #flashcards-tab-content .fc-difficulty-button.active.easy { background-color: var(--green-500); color: white; }
        #flashcards-tab-content .fc-difficulty-button.active.medium { background-color: var(--yellow-500); color: white; }
        #flashcards-tab-content .fc-difficulty-button.active.hard { background-color: var(--red-500); color: white; }
        #flashcards-tab-content .fc-container { width: 100%; max-width: 42rem; height: 20rem; perspective: 1000px; }
        #flashcards-tab-content .fc-placeholder { width: 100%; height: 100%; background-color: rgba(51, 65, 85, 0.5); border-radius: 1rem; display: flex; align-items: center; justify-content: center; color: var(--slate-400); font-size: 1.25rem; font-weight: 500; }
        #flashcards-tab-content .fc-inner { position: relative; width: 100%; height: 100%; transition: transform 0.7s; transform-style: preserve-3d; }
        #flashcards-tab-content .fc-inner.is-revealed { transform: rotateY(180deg); }
        #flashcards-tab-content .fc-card-face { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; border-radius: 1rem; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1); padding: 2rem; display: flex; align-items: center; justify-content: center; box-sizing: border-box; text-align: center; }
        #flashcards-tab-content .fc-card-front { background-color: var(--slate-800); border: 1px solid rgba(255, 255, 255, 0.1); color: var(--sky-300); font-size: 1.5rem; font-weight: 600; }
        #flashcards-tab-content .fc-card-back { background-color: var(--sky-900); border: 1px solid rgba(14, 165, 233, 0.3); color: var(--white); font-size: 1.75rem; font-weight: 700; transform: rotateY(180deg); }
        #flashcards-tab-content .fc-action-buttons { display: flex; gap: 1rem; margin-top: 2rem; }
        #flashcards-tab-content .fc-action-button { display: flex; align-items: center; justify-content: center; font-weight: 700; padding: 0.75rem 2rem; border-radius: 9999px; border: none; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -2px rgba(0, 0, 0, 0.2); transform: scale(1); }
        #flashcards-tab-content .fc-action-button:hover:not(:disabled) { transform: scale(1.05); }
        #flashcards-tab-content .fc-action-button:disabled { cursor: not-allowed; transform: scale(1); }
        #flashcards-tab-content #fc-reveal-btn { background-color: var(--sky-600); color: var(--white); }
        #flashcards-tab-content #fc-reveal-btn:hover:not(:disabled) { background-color: var(--sky-500); }
        #flashcards-tab-content #fc-reveal-btn:disabled { background-color: var(--slate-600); }
        #flashcards-tab-content #fc-reveal-btn.revealed-state { background-color: var(--slate-200); color: var(--slate-800); }
        #flashcards-tab-content #fc-reveal-btn.revealed-state:hover:not(:disabled) { background-color: var(--white); }
        #flashcards-tab-content #fc-next-btn { background-color: var(--slate-200); color: var(--slate-800); }
        #flashcards-tab-content #fc-next-btn:hover:not(:disabled) { background-color: var(--white); }
        #flashcards-tab-content .fc-icon { width: 1.25rem; height: 1.25rem; }
        #flashcards-tab-content .fc-icon-left { margin-right: 0.5rem; }
        #flashcards-tab-content .fc-icon-right { margin-left: 0.5rem; }
        @media (min-width: 768px) {
            #flashcards-tab-content h1 { font-size: 3rem; line-height: 1; }
            #flashcards-tab-content .fc-card-back { font-size: 2rem; }
        }

    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"></path>
                    </svg>
                    <h1 class="text-2xl font-bold text-gray-900">Subnetting Pro</h1>
                </div>
                <div class="flex items-center gap-4">
                    <button type="button" id="theme-toggle" class="p-2 rounded-lg hover:bg-gray-100" aria-label="Toggle dark mode">
                        <svg id="theme-icon-light" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                        </svg>
                        <svg id="theme-icon-dark" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                        </svg>
                    </button>
                    <button type="button" id="help-button" class="p-2 rounded-lg hover:bg-gray-100" aria-label="Open help tutorial">
                        <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Tabs -->
    <div class="bg-white border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <nav class="flex space-x-8" aria-label="Tabs" role="tablist">
                <button type="button" id="practice-tab-btn" class="tab-button tab-active py-4 px-1 border-b-2 font-medium text-sm" data-tab="practice" role="tab" aria-controls="practice-tab-content" aria-selected="true">
                    Practice Mode
                </button>
                <button type="button" id="wildcard-tab-btn" class="tab-button py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700" data-tab="wildcard" role="tab" aria-controls="wildcard-tab-content" aria-selected="false" tabindex="-1">
                    Wildcard Mode
                </button>
                <button type="button" id="calculator-tab-btn" class="tab-button py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700" data-tab="calculator" role="tab" aria-controls="calculator-tab-content" aria-selected="false" tabindex="-1">
                    Calculator
                </button>
                <button type="button" id="flashcards-tab-btn" class="tab-button py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700" data-tab="flashcards" role="tab" aria-controls="flashcards-tab-content" aria-selected="false" tabindex="-1">
                    Flashcards
                </button>
            </nav>
        </div>
    </div>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 py-8 sm:px-6 lg:px-8">
        <!-- Practice Mode -->
        <div id="practice-tab-content" class="tab-content" role="tabpanel" aria-labelledby="practice-tab-btn">
            <div class="bg-white rounded-lg shadow p-6">
                <!-- Difficulty Selector -->
                <div class="mb-6">
                    <label id="practice-difficulty-label" class="block text-sm font-medium text-gray-700 mb-2">Difficulty</label>
                    <div class="flex flex-wrap gap-2" role="radiogroup" aria-labelledby="practice-difficulty-label">
                        <button type="button" class="difficulty-btn px-4 py-2 rounded-full border-2 border-blue-600 bg-blue-600 text-white font-medium" data-difficulty="easy" role="radio" aria-checked="true">Easy</button>
                        <button type="button" class="difficulty-btn px-4 py-2 rounded-full border-2 border-gray-300 text-gray-700 font-medium hover:border-blue-600" data-difficulty="medium" role="radio" aria-checked="false">Medium</button>
                        <button type="button" class="difficulty-btn px-4 py-2 rounded-full border-2 border-gray-300 text-gray-700 font-medium hover:border-blue-600" data-difficulty="hard" role="radio" aria-checked="false">Hard</button>
                    </div>
                    <p id="difficulty-desc" class="text-sm text-gray-500 mt-2">Standard subnets (/24, /16) - Perfect for beginners</p>
                </div>

                <!-- Target IP Input -->
                <div class="mb-6">
                    <label for="practice-ip" class="block text-sm font-medium text-gray-700 mb-2">Target Network</label>
                    <div class="flex flex-col sm:flex-row gap-2">
                        <div class="flex gap-2 flex-1">
                            <input type="text" id="practice-ip" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="192.168.1.0">
                            <span class="text-2xl font-bold text-gray-700 flex items-center" aria-hidden="true">/</span>
                            <label for="practice-cidr" class="sr-only">CIDR</label>
                            <input type="text" id="practice-cidr" class="w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="24" maxlength="2">
                        </div>
                        <button type="button" id="practice-new-btn" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium flex items-center justify-center gap-2 w-full sm:w-auto">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                            </svg>
                            New Problem
                        </button>
                    </div>
                </div>

                <!-- Practice Fields -->
                <div class="space-y-4 mb-6">
                    <div class="practice-field">
                        <label for="practice-network" class="block text-sm font-medium text-gray-700 mb-1">Network Address</label>
                        <div class="flex gap-2">
                            <input type="text" id="practice-network" data-field="network" class="practice-input flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="•.•.•.•">
                            <span class="status-icon w-8" role="status" aria-live="polite"></span>
                            <button type="button" class="check-btn hidden px-3 py-1 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700" data-field="network">Check</button>
                            <button type="button" class="show-btn px-3 py-1 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700" data-field="network">Show</button>
                        </div>
                    </div>
                    <div class="practice-field">
                        <label for="practice-firstHost" class="block text-sm font-medium text-gray-700 mb-1">First Host</label>
                        <div class="flex gap-2">
                            <input type="text" id="practice-firstHost" data-field="firstHost" class="practice-input flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="•.•.•.•">
                            <span class="status-icon w-8" role="status" aria-live="polite"></span>
                            <button type="button" class="check-btn hidden px-3 py-1 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700" data-field="firstHost">Check</button>
                            <button type="button" class="show-btn px-3 py-1 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700" data-field="firstHost">Show</button>
                        </div>
                    </div>
                    <div class="practice-field">
                        <label for="practice-lastHost" class="block text-sm font-medium text-gray-700 mb-1">Last Host</label>
                        <div class="flex gap-2">
                            <input type="text" id="practice-lastHost" data-field="lastHost" class="practice-input flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="•.•.•.•">
                            <span class="status-icon w-8" role="status" aria-live="polite"></span>
                            <button type="button" class="check-btn hidden px-3 py-1 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700" data-field="lastHost">Check</button>
                            <button type="button" class="show-btn px-3 py-1 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700" data-field="lastHost">Show</button>
                        </div>
                    </div>
                    <div class="practice-field">
                        <label for="practice-broadcast" class="block text-sm font-medium text-gray-700 mb-1">Broadcast Address</label>
                        <div class="flex gap-2">
                            <input type="text" id="practice-broadcast" data-field="broadcast" class="practice-input flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="•.•.•.•">
                            <span class="status-icon w-8" role="status" aria-live="polite"></span>
                            <button type="button" class="check-btn hidden px-3 py-1 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700" data-field="broadcast">Check</button>
                            <button type="button" class="show-btn px-3 py-1 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700" data-field="broadcast">Show</button>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-3 mb-6">
                    <button type="button" id="practice-show-all" class="flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                        </svg>
                        Show All
                    </button>
                    <button type="button" id="practice-check-all" class="flex-1 px-4 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        Check All
                    </button>
                </div>

                <!-- Stats -->
                <div id="practice-stats" class="bg-gray-50 rounded-lg p-4 hidden">
                    <div class="grid grid-cols-3 gap-4 text-sm">
                        <div>
                            <span class="text-gray-600">Class:</span>
                            <span id="stats-class" class="font-medium text-gray-900 ml-2">-</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Subnet Mask:</span>
                            <span id="stats-mask" class="font-medium text-gray-900 ml-2">-</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Usable Hosts:</span>
                            <span id="stats-hosts" class="font-medium text-gray-900 ml-2">-</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Wildcard Mode -->
        <div id="wildcard-tab-content" class="tab-content hidden" role="tabpanel" aria-labelledby="wildcard-tab-btn">
            <div class="bg-white rounded-lg shadow p-6">
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 flex items-start gap-3" role="alert">
                    <svg class="w-5 h-5 text-blue-600 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <p class="text-sm text-blue-800">Wildcard masks are the inverse of subnet masks, used in ACLs and routing protocols to identify ranges of IP addresses.</p>
                </div>

                <!-- Difficulty Selector for Wildcard -->
                <div class="mb-6">
                    <label id="wildcard-difficulty-label" class="block text-sm font-medium text-gray-700 mb-2">Difficulty</label>
                    <div class="flex flex-wrap gap-2" role="radiogroup" aria-labelledby="wildcard-difficulty-label">
                        <button type="button" class="wildcard-difficulty-btn px-4 py-2 rounded-full border-2 border-blue-600 bg-blue-600 text-white font-medium" data-difficulty="easy" role="radio" aria-checked="true">Easy</button>
                        <button type="button" class="wildcard-difficulty-btn px-4 py-2 rounded-full border-2 border-gray-300 text-gray-700 font-medium hover:border-blue-600" data-difficulty="medium" role="radio" aria-checked="false">Medium</button>
                        <button type="button" class="wildcard-difficulty-btn px-4 py-2 rounded-full border-2 border-gray-300 text-gray-700 font-medium hover:border-blue-600" data-difficulty="hard" role="radio" aria-checked="false">Hard</button>
                    </div>
                    <p id="wildcard-difficulty-desc" class="text-sm text-gray-500 mt-2">Standard subnets (/24, /16) - Perfect for beginners</p>
                </div>
                
                <!-- Target Network for Wildcard -->
                <div class="mb-6">
                    <label for="wildcard-ip" class="block text-sm font-medium text-gray-700 mb-2">Target Network</label>
                    <div class="flex gap-2">
                        <input type="text" id="wildcard-ip" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="192.168.10.0">
                        <span class="text-2xl font-bold text-gray-700 flex items-center" aria-hidden="true">/</span>
                        <label for="wildcard-cidr" class="sr-only">CIDR</label>
                        <input type="text" id="wildcard-cidr" class="w-20 px-3 py-2 border border-gray-300 rounded-lg text-center focus:ring-2 focus:ring-blue-500" placeholder="27" maxlength="2">
                        <button type="button" id="wildcard-new-btn" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                            </svg>
                            New
                        </button>
                    </div>
                </div>

                <!-- Wildcard Fields -->
                <div class="space-y-4 mb-6">
                    <div>
                        <label for="wildcard-mask-input" class="block text-sm font-medium text-gray-700 mb-1">Wildcard Mask</label>
                        <div class="flex gap-2">
                            <input type="text" id="wildcard-mask-input" data-field="wildcard" class="wildcard-input flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="•.•.•.•">
                            <span id="wildcard-mask-status" class="status-icon w-8" role="status" aria-live="polite"></span>
                            <button type="button" id="wildcard-mask-check" class="wildcard-check-btn hidden px-3 py-1 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700">Check</button>
                            <button type="button" id="wildcard-mask-show" class="wildcard-show-btn px-3 py-1 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700">Show</button>
                        </div>
                    </div>
                    <div>
                        <label for="wildcard-first-input" class="block text-sm font-medium text-gray-700 mb-1">First Usable IP</label>
                        <div class="flex gap-2">
                            <input type="text" id="wildcard-first-input" data-field="firstHost" class="wildcard-input flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="•.•.•.•">
                            <span id="wildcard-first-status" class="status-icon w-8" role="status" aria-live="polite"></span>
                            <button type="button" id="wildcard-first-check" class="wildcard-check-btn hidden px-3 py-1 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700">Check</button>
                            <button type="button" id="wildcard-first-show" class="wildcard-show-btn px-3 py-1 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700">Show</button>
                        </div>
                    </div>
                    <div>
                        <label for="wildcard-last-input" class="block text-sm font-medium text-gray-700 mb-1">Last Usable IP</label>
                        <div class="flex gap-2">
                            <input type="text" id="wildcard-last-input" data-field="lastHost" class="wildcard-input flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="•.•.•.•">
                            <span id="wildcard-last-status" class="status-icon w-8" role="status" aria-live="polite"></span>
                            <button type="button" id="wildcard-last-check" class="wildcard-check-btn hidden px-3 py-1 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700">Check</button>
                            <button type="button" id="wildcard-last-show" class="wildcard-show-btn px-3 py-1 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700">Show</button>
                        </div>
                    </div>
                    <div>
                        <label for="wildcard-block-input" class="block text-sm font-medium text-gray-700 mb-1">Block Size (Total IPs)</label>
                        <div class="flex gap-2">
                            <input type="text" id="wildcard-block-input" data-field="totalHosts" class="wildcard-input flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="0">
                            <span id="wildcard-block-status" class="status-icon w-8" role="status" aria-live="polite"></span>
                            <button type="button" id="wildcard-block-check" class="wildcard-check-btn hidden px-3 py-1 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700">Check</button>
                            <button type="button" id="wildcard-block-show" class="wildcard-show-btn px-3 py-1 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700">Show</button>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-3 mb-6">
                    <button type="button" id="wildcard-show-all" class="flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                        </svg>
                        Show All
                    </button>
                    <button type="button" id="wildcard-check-all" class="flex-1 px-4 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        Check All
                    </button>
                </div>

                <div id="wildcard-reference" class="bg-gray-50 rounded-lg p-4 mt-4 hidden">
                    <h3 class="font-medium text-gray-900 mb-3">Reference Info</h3>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Subnet Mask:</span>
                            <span id="wildcard-ref-mask" class="font-medium">-</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Network:</span>
                            <span id="wildcard-ref-network" class="font-medium">-</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Broadcast:</span>
                            <span id="wildcard-ref-broadcast" class="font-medium">-</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Calculator Mode -->
        <div id="calculator-tab-content" class="tab-content hidden" role="tabpanel" aria-labelledby="calculator-tab-btn">
            <div class="bg-white rounded-lg shadow p-6">
                <div class="space-y-6">
                    <!-- IP Input -->
                    <div>
                        <label for="calc-ip" class="block text-sm font-medium text-gray-700 mb-2">Host IP Address</label>
                        <div class="flex gap-3">
                            <input type="text" id="calc-ip" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="172.16.10.0" value="172.16.10.0">
                            <div id="calc-class" class="px-4 py-2 bg-blue-100 text-blue-800 rounded-lg font-medium flex items-center justify-center">Class B</div>
                        </div>
                    </div>

                    <!-- CIDR Input -->
                    <div>
                        <label for="calc-cidr" class="block text-sm font-medium text-gray-700 mb-2">Subnet Mask Bits</label>
                        <input type="number" id="calc-cidr" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500" placeholder="21" value="21" min="8" max="30">
                    </div>

                    <!-- Stats Grid -->
                    <div id="calc-stats" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <div class="text-xs text-blue-600 mb-1">Subnets</div>
                            <div id="calc-subnets" class="text-2xl font-bold text-blue-900" aria-live="polite">32</div>
                        </div>
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                            <div class="text-xs text-gray-600 mb-1">Host Bits</div>
                            <div id="calc-hostbits" class="text-2xl font-bold text-gray-900" aria-live="polite">11</div>
                        </div>
                        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
                            <div class="text-xs text-gray-600 mb-1">Total Hosts</div>
                            <div id="calc-totalhosts" class="text-2xl font-bold text-gray-900" aria-live="polite">2048</div>
                        </div>
                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                            <div class="text-xs text-blue-600 mb-1">Usable Hosts</div>
                            <div id="calc-usablehosts" class="text-2xl font-bold text-blue-900" aria-live="polite">2046</div>
                        </div>
                    </div>

                    <!-- Network Details -->
                    <div id="calc-details" class="bg-gray-50 rounded-lg p-4">
                        <div class="space-y-3 text-sm">
                            <div class="flex justify-between items-center py-2 border-b border-gray-200">
                                <span class="text-gray-600 flex items-center gap-2">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"></path></svg>
                                    Network Address
                                </span>
                                <span id="calc-network" class="font-medium text-gray-900" aria-live="polite">172.16.0.0</span>
                            </div>
                            <div class="flex justify-between items-center py-2 border-b border-gray-200">
                                <span class="text-gray-600 flex items-center gap-2">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"></path></svg>
                                    Subnet Mask
                                </span>
                                <span id="calc-mask" class="font-medium text-gray-900" aria-live="polite">255.255.248.0</span>
                            </div>
                            <div class="flex justify-between items-center py-2 border-b border-gray-200">
                                <span class="text-gray-600 flex items-center gap-2">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"></path></svg>
                                    Wildcard Mask
                                </span>
                                <span id="calc-wildcard" class="font-medium text-gray-900" aria-live="polite">0.0.7.255</span>
                            </div>
                            <div class="flex justify-between items-center py-2 border-b border-gray-200">
                                <span class="text-gray-600 flex items-center gap-2">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg>
                                    First Host
                                </span>
                                <span id="calc-firsthost" class="font-medium text-gray-900" aria-live="polite">172.16.0.1</span>
                            </div>
                            <div class="flex justify-between items-center py-2 border-b border-gray-200">
                                <span class="text-gray-600 flex items-center gap-2">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 17l-5-5m0 0l5-5m-5 5h12"></path></svg>
                                    Last Host
                                </span>
                                <span id="calc-lasthost" class="font-medium text-gray-900" aria-live="polite">172.16.7.254</span>
                            </div>
                            <div class="flex justify-between items-center py-2">
                                <span class="text-gray-600 flex items-center gap-2">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.348 14.651a3.75 3.75 0 010-5.303m5.304 0a3.75 3.75 0 010 5.303m-7.425 2.122a6.75 6.75 0 010-9.546m9.546 0a6.75 6.75 0 010 9.546M5.106 18.894c-3.808-3.808-3.808-9.98 0-13.789m13.788 0c3.808 3.808 3.808 9.981 0 13.789"></path></svg>
                                    Broadcast
                                </span>
                                <span id="calc-broadcast" class="font-medium text-gray-900" aria-live="polite">172.16.7.255</span>
                            </div>
                        </div>
                    </div>

                    <!-- Binary Toggle -->
                    <button type="button" id="calc-binary-toggle" class="w-full px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium text-gray-700" aria-expanded="false" aria-controls="calc-binary">
                        Show Binary Breakdown
                    </button>

                    <!-- Binary Display -->
                    <div id="calc-binary" class="bg-gray-50 rounded-lg p-4 hidden">
                        <div class="space-y-4 text-sm font-mono">
                            <div>
                                <div class="text-xs text-gray-600 mb-1">IP Address Binary</div>
                                <div id="calc-binary-ip" class="text-gray-900">10101100.00010000.00001010.00000000</div>
                            </div>
                            <div>
                                <div class="text-xs text-gray-600 mb-1">Subnet Mask Binary</div>
                                <div id="calc-binary-mask" class="text-gray-900">11111111.11111111.11111000.00000000</div>
                            </div>
                            <div>
                                <div class="text-xs text-gray-600 mb-1">Network Address Binary</div>
                                <div id="calc-binary-network" class="text-blue-600 bg-blue-50 p-2 rounded">10101100.00010000.00000000.00000000</div>
                            </div>
                        </div>
                    </div>

                    <!-- Navigation -->
                    <div class="flex gap-3">
                        <button type="button" id="calc-prev" class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium flex items-center justify-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                            </svg>
                            Prev Subnet
                        </button>
                        <button type="button" id="calc-list-subnets" class="flex-1 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 font-medium flex items-center justify-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path></svg>
                            List Subnets
                        </button>
                        <button type="button" id="calc-next" class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium flex items-center justify-center gap-2">
                            Next Subnet
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Flashcards Mode -->
        <div id="flashcards-tab-content" class="tab-content hidden" role="tabpanel" aria-labelledby="flashcards-tab-btn">
            <div class="fc-background-grid"></div>
            <div class="fc-content-wrapper">
                <header>
                    <h1>IPv4 Subnetting Practice</h1>
                    <p>Sharpen your networking skills with flashcards.</p>
                </header>
        
                <div class="fc-difficulty-selector">
                    <button class="fc-difficulty-button easy" data-difficulty="easy">Easy</button>
                    <button class="fc-difficulty-button medium" data-difficulty="medium">Medium</button>
                    <button class="fc-difficulty-button hard" data-difficulty="hard">Hard</button>
                </div>
        
                <div id="fc-container" class="fc-container">
                    <!-- Flashcard will be rendered here by JS -->
                </div>
        
                <div class="fc-action-buttons">
                    <button id="fc-reveal-btn" class="fc-action-button" disabled>
                        <!-- Button content rendered by JS -->
                    </button>
                    <button id="fc-next-btn" class="fc-action-button" disabled>
                        Next
                        <svg xmlns="http://www.w3.org/2000/svg" class="fc-icon fc-icon-right" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Help Modal -->
    <div id="help-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="help-modal-title">
        <div class="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] flex flex-col overflow-hidden">
            <div class="p-6 border-b border-gray-200 flex items-center justify-between">
                <h2 id="help-modal-title" class="text-2xl font-bold text-gray-900">Subnetting Tutorial</h2>
                <button type="button" id="help-close" class="p-2 hover:bg-gray-100 rounded-lg" aria-label="Close">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div class="p-6 overflow-y-auto" style="min-height: 0;">
                <div class="space-y-6">
                    <div>
                        <h3 class="text-lg font-bold text-blue-600 mb-2">What is Subnetting?</h3>
                        <p class="text-gray-700">Subnetting divides a larger network into smaller sub-networks. It helps organize networks efficiently and improve security.</p>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-bold text-blue-600 mb-3">Key Terms</h3>
                        <div class="space-y-3">
                            <div>
                                <div class="font-medium text-gray-900">Network Address</div>
                                <div class="text-sm text-gray-600">The first IP in a subnet; identifies the network itself (cannot be assigned to hosts)</div>
                            </div>
                            <div>
                                <div class="font-medium text-gray-900">First Host</div>
                                <div class="text-sm text-gray-600">First usable IP address for devices (Network + 1)</div>
                            </div>
                            <div>
                                <div class="font-medium text-gray-900">Last Host</div>
                                <div class="text-sm text-gray-600">Last usable IP address for devices (Broadcast - 1)</div>
                            </div>
                            <div>
                                <div class="font-medium text-gray-900">Broadcast</div>
                                <div class="text-sm text-gray-600">Last IP in subnet; used to send data to all hosts (cannot be assigned)</div>
                            </div>
                            <div>
                                <div class="font-medium text-gray-900">CIDR Notation</div>
                                <div class="text-sm text-gray-600">Slash notation (e.g., /24) indicating how many bits are used for the network</div>
                            </div>
                            <div>
                                <div class="font-medium text-gray-900">Wildcard Mask</div>
                                <div class="text-sm text-gray-600">Inverse of subnet mask, used in ACLs and routing protocols (e.g., 0.0.0.255 for /24)</div>
                            </div>
                        </div>
                    </div>

                     <div>
                        <h3 class="text-lg font-bold text-blue-600 mb-3">IP Address Classes</h3>
                        <div class="text-sm rounded-lg border border-gray-200 overflow-hidden">
                            <div class="grid grid-cols-4 tutorial-table-header bg-gray-50">
                                <div>Class</div>
                                <div>Range</div>
                                <div>Default Mask</div>
                                <div>Purpose</div>
                            </div>
                            <div class="space-y-1 p-2">
                                <div class="grid grid-cols-4 tutorial-table-row">
                                    <div class="font-bold">A</div>
                                    <div class="font-mono">1.0.0.0 - 126.255.255.255</div>
                                    <div class="font-mono">255.0.0.0</div>
                                    <div>Unicast</div>
                                </div>
                                <div class="grid grid-cols-4 tutorial-table-row bg-gray-50 rounded-md">
                                    <div class="font-bold">B</div>
                                    <div class="font-mono">128.0.0.0 - 191.255.255.255</div>
                                    <div class="font-mono">255.255.0.0</div>
                                    <div>Unicast</div>
                                </div>
                                <div class="grid grid-cols-4 tutorial-table-row">
                                    <div class="font-bold">C</div>
                                    <div class="font-mono">192.0.0.0 - 223.255.255.255</div>
                                    <div class="font-mono">255.255.255.0</div>
                                    <div>Unicast</div>
                                </div>
                                <div class="grid grid-cols-4 tutorial-table-row bg-gray-50 rounded-md">
                                    <div class="font-bold">D</div>
                                    <div class="font-mono">224.0.0.0 - 239.255.255.255</div>
                                    <div>N/A</div>
                                    <div>Multicast</div>
                                </div>
                                <div class="grid grid-cols-4 tutorial-table-row">
                                    <div class="font-bold">E</div>
                                    <div class="font-mono">240.0.0.0 - 255.255.255.255</div>
                                    <div>N/A</div>
                                    <div>Experimental</div>
                                </div>
                            </div>
                        </div>
                         <p class="text-xs text-gray-500 mt-2">Note: 127.0.0.0/8 is reserved for loopback addresses.</p>
                    </div>

                    <div>
                        <h3 class="text-lg font-bold text-blue-600 mb-3">Private IP Ranges (RFC 1918)</h3>
                        <div class="text-sm rounded-lg border border-gray-200 overflow-hidden">
                             <div class="grid grid-cols-3 tutorial-table-header bg-gray-50">
                                <div>Class</div>
                                <div>Range</div>
                                <div>CIDR Block</div>
                            </div>
                            <div class="space-y-1 p-2">
                                <div class="grid grid-cols-3 tutorial-table-row">
                                    <div class="font-bold">A</div>
                                    <div class="font-mono">10.0.0.0 - 10.255.255.255</div>
                                    <div class="font-mono">10.0.0.0/8</div>
                                </div>
                                <div class="grid grid-cols-3 tutorial-table-row bg-gray-50 rounded-md">
                                    <div class="font-bold">B</div>
                                    <div class="font-mono">172.16.0.0 - 172.31.255.255</div>
                                    <div class="font-mono">172.16.0.0/12</div>
                                </div>
                                <div class="grid grid-cols-3 tutorial-table-row">
                                    <div class="font-bold">C</div>
                                    <div class="font-mono">192.168.0.0 - 192.168.255.255</div>
                                    <div class="font-mono">192.168.0.0/16</div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div>
                        <h3 class="text-lg font-bold text-blue-600 mb-3">Quick Tips</h3>
                        <ul class="space-y-2 text-sm text-gray-700">
                             <li class="flex items-start gap-2">
                                <span class="text-green-600 mt-0.5">✓</span>
                                <span>Each time you add 1 bit to the network (e.g., from /24 to /25), you <strong>double</strong> the number of subnets and <strong>halve</strong> the number of hosts per subnet.</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-green-600 mt-0.5">✓</span>
                                <span>Subnetting is effectively "borrowing" bits from the host portion of an address to create more sub-networks.</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-green-600 mt-0.5">✓</span>
                                <span>Higher CIDR = smaller subnet (fewer hosts).</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-green-600 mt-0.5">✓</span>
                                <span>Usable hosts = 2^(32-CIDR) - 2 (for the network and broadcast addresses). This is not true for /31 and /32 networks.</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <span class="text-green-600 mt-0.5">✓</span>
                                <span>Wildcard masks are used in Cisco ACLs and OSPF/EIGRP.</span>
                            </li>
                        </ul>
                    </div>

                    <div>
                        <h3 class="text-lg font-bold text-blue-600 mb-2">How to Use This App</h3>
                        <p class="text-sm text-gray-700 mb-2"><strong>Practice Mode:</strong> Enter subnet details, check your answers, and generate new problems</p>
                        <p class="text-sm text-gray-700 mb-2"><strong>Wildcard Mode:</strong> Practice wildcard mask calculations for ACLs</p>
                        <p class="text-sm text-gray-700"><strong>Calculator Mode:</strong> Input an IP and CIDR to see complete subnet breakdown with binary visualization</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Subnet List Modal -->
    <div id="subnet-list-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4" role="dialog" aria-modal="true" aria-labelledby="subnet-list-modal-title">
        <div class="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] flex flex-col overflow-hidden">
            <div class="p-6 border-b border-gray-200 flex items-center justify-between">
                <h2 id="subnet-list-modal-title" class="text-2xl font-bold text-gray-900">Subnet List</h2>
                <button type="button" id="subnet-list-close" class="p-2 hover:bg-gray-100 rounded-lg" aria-label="Close">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div id="subnet-list-content" class="p-6 overflow-y-auto" style="min-height: 0;">
                <!-- Subnet list will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <!-- All JavaScript embedded inline -->
    <script>
        /* Safer SubnetMath replacement */
        const SubnetMath = {
          // Convert IP string to 32-bit unsigned number
          ipToNumber(ip) {
            const parts = ip.trim().split('.');
            if (parts.length !== 4) throw new Error('Invalid IP format');
            return parts.reduce((acc, octet) => (acc << 8) + Number(octet), 0) >>> 0;
          },

          // Convert 32-bit unsigned number to IP string
          numberToIp(num) {
            return [
              (num >>> 24) & 0xff,
              (num >>> 16) & 0xff,
              (num >>> 8) & 0xff,
              num & 0xff
            ].join('.');
          },

          // Strict IP validation (each octet 0-255, no extra characters)
          isValidIp(ip) {
            if (typeof ip !== 'string') return false;
            const regex = /^(25[0-5]|2[0-4]\d|1?\d{1,2})\.(25[0-5]|2[0-4]\d|1?\d{1,2})\.(25[0-5]|2[0-4]\d|1?\d{1,2})\.(25[0-5]|2[0-4]\d|1?\d{1,2})$/;
            return regex.test(ip.trim());
          },

          // Calculate subnet mask from CIDR safely
          cidrToMask(cidr) {
            cidr = Number(cidr);
            if (isNaN(cidr) || cidr < 0 || cidr > 32) return null;
            if (cidr === 0) return '0.0.0.0';
            // (0xFFFFFFFF << (32 - cidr)) >>> 0 is safe because (32-cidr) is in [0,31]
            const maskNum = (0xFFFFFFFF << (32 - cidr)) >>> 0;
            return this.numberToIp(maskNum);
          },

          // Calculate wildcard mask from CIDR by inverting mask
          cidrToWildcard(cidr) {
            cidr = Number(cidr);
            if (isNaN(cidr) || cidr < 0 || cidr > 32) return null;
            const maskNum = (cidr === 0) ? 0 : (0xFFFFFFFF << (32 - cidr)) >>> 0;
            const wildcardNum = (~maskNum) >>> 0;
            return this.numberToIp(wildcardNum);
          },

          // Get network address (safe bit ops)
          getNetworkAddress(ip, cidr) {
            if (!this.isValidIp(ip)) throw new Error('Invalid IP');
            cidr = Number(cidr);
            if (isNaN(cidr) || cidr < 0 || cidr > 32) throw new Error('Invalid CIDR');
            const ipNum = this.ipToNumber(ip);
            const maskNum = (cidr === 0) ? 0 : (0xFFFFFFFF << (32 - cidr)) >>> 0;
            const networkNum = (ipNum & maskNum) >>> 0;
            return this.numberToIp(networkNum);
          },

          // Get broadcast address by ORing wildcard
          getBroadcastAddress(network, cidr) {
            if (!this.isValidIp(network)) throw new Error('Invalid IP');
            cidr = Number(cidr);
            if (isNaN(cidr) || cidr < 0 || cidr > 32) throw new Error('Invalid CIDR');
            const networkNum = this.ipToNumber(network);
            const maskNum = (cidr === 0) ? 0 : (0xFFFFFFFF << (32 - cidr)) >>> 0;
            const wildcard = (~maskNum) >>> 0;
            const broadcastNum = (networkNum | wildcard) >>> 0;
            return this.numberToIp(broadcastNum);
          },

          // Get first usable host (handle /31 and /32)
          getFirstHost(network, cidr) {
            if (!this.isValidIp(network)) throw new Error('Invalid IP');
            cidr = Number(cidr);
            const networkNum = this.ipToNumber(network);
            if (cidr >= 31) {
              return this.numberToIp(networkNum);
            }
            return this.numberToIp((networkNum + 1) >>> 0);
          },

          // Get last usable host (handle /31 and /32)
          getLastHost(broadcast, cidr) {
            if (!this.isValidIp(broadcast)) throw new Error('Invalid IP');
            cidr = Number(cidr);
            const broadcastNum = this.ipToNumber(broadcast);
            if (cidr >= 31) {
              return this.numberToIp(broadcastNum);
            }
            return this.numberToIp((broadcastNum - 1) >>> 0);
          },

          // Get IP class
          getIpClass(ip) {
            if (!this.isValidIp(ip)) return 'Unknown';
            const firstOctet = parseInt(ip.split('.')[0], 10);
            if (firstOctet >= 1 && firstOctet <= 126) return 'A';
            if (firstOctet >= 128 && firstOctet <= 191) return 'B';
            if (firstOctet >= 192 && firstOctet <= 223) return 'C';
            if (firstOctet >= 224 && firstOctet <= 239) return 'D';
            return 'E';
          },

          // Calculate complete subnet info (safer and handles /31 & /32)
          calculateSubnetInfo(ip, cidr) {
            if (!this.isValidIp(ip) || isNaN(cidr) || cidr < 0 || cidr > 32) return null;
            cidr = Number(cidr);
            const network = this.getNetworkAddress(ip, cidr);
            const mask = this.cidrToMask(cidr);
            const wildcard = this.cidrToWildcard(cidr);
            const broadcast = this.getBroadcastAddress(network, cidr);
            const hostBits = 32 - cidr;
            const totalHosts = (hostBits >= 0) ? Math.pow(2, hostBits) : 0;

            let usableHosts;
            if (cidr >= 31) {
              usableHosts = (cidr === 31) ? 2 : 1;
            } else {
              usableHosts = Math.max(0, totalHosts - 2);
            }

            const firstHost = this.getFirstHost(network, cidr);
            const lastHost = this.getLastHost(broadcast, cidr);

            return {
              network, firstHost, lastHost, broadcast, mask, wildcard, cidr,
              totalHosts, usableHosts, classType: this.getIpClass(ip),
              maskBits: cidr, hostBits
            };
          },

          // Get next subnet
          getNextSubnet(network, cidr) {
            if (!this.isValidIp(network) || isNaN(cidr) || cidr < 0 || cidr > 32) return null;
            const netNum = this.ipToNumber(network);
            const blockSize = Math.pow(2, 32 - cidr);
            const nextNetNum = (netNum + blockSize) >>> 0;
            return this.numberToIp(nextNetNum);
          },

          // Get previous subnet
          getPreviousSubnet(network, cidr) {
            if (!this.isValidIp(network) || isNaN(cidr) || cidr < 0 || cidr > 32) return null;
            const networkNum = this.ipToNumber(network);
            const subnetSize = Math.pow(2, 32 - cidr);
            const prevNum = (networkNum - subnetSize) >>> 0;
            return this.numberToIp(prevNum);
          },

          // Convert IP to binary
          ipToBinary(ip) {
            if (!this.isValidIp(ip)) return "Invalid IP Address";
            return ip.split('.').map(n => parseInt(n, 10).toString(2).padStart(8, '0')).join('.');
          },

          // Generate random IP for practice
          generateRandomIp(difficulty = 'easy') {
            const configs = {
              easy: [ { cidr: 24, class: 'C' }, { cidr: 16, class: 'B' } ],
              medium: [ { cidr: 27, class: 'C' }, { cidr: 26, class: 'C' }, { cidr: 21, class: 'B' } ],
              hard: [ { cidr: 28, class: 'C' }, { cidr: 29, class: 'C' }, { cidr: 19, class: 'B' } ]
            };
            const config = configs[difficulty][Math.floor(Math.random() * configs[difficulty].length)];
            let firstOctet;
            if (config.class === 'A') firstOctet = Math.floor(Math.random() * 126) + 1;
            else if (config.class === 'B') firstOctet = Math.floor(Math.random() * 64) + 128;
            else firstOctet = Math.floor(Math.random() * 32) + 192;
            const ip = `${firstOctet}.${Math.floor(Math.random() * 256)}.${Math.floor(Math.random() * 256)}.${Math.floor(Math.random() * 256)}`;
            return { ip, cidr: config.cidr };
          }
        };
        
        // --- Flashcard Data ---
        const FLASHCARD_DATA = [
            { "question": "How many bits are in an IPv4 address?", "answer": "32-bits", "difficulty": "easy" },
            { "question": "How many octets are in an IPv4 address?", "answer": "4", "difficulty": "easy" },
            { "question": "What is the subnet mask for 172.16.132.65/16?", "answer": "255.255.0.0", "difficulty": "easy" },
            { "question": "What is the subnet mask of 192.168.32.44/24?", "answer": "255.255.255.0", "difficulty": "easy" },
            { "question": "What is the class A private IP address range?", "answer": "10.0.0.0 - 10.255.255.255", "difficulty": "easy" },
            { "question": "What is the class B private IP address range?", "answer": "172.16.0.0 – 172.31.255.255", "difficulty": "easy" },
            { "question": "What is the class C private IP address range?", "answer": "192.168.0.0 – 192.168.255.255", "difficulty": "easy" },
            { "question": "What is the main purpose of private IP addresses?", "answer": "The main purpose of private IP addresses is to prolong the life of IPv4.", "difficulty": "easy" },
            { "question": "What is a network route?", "answer": "A route that points to a network address. For example: 192.168.0.0/24", "difficulty": "easy" },
            { "question": "What is a host route?", "answer": "A host route points to a specific address. It will have a /32 mask. For example: 192.168.1.5/32", "difficulty": "easy" },
            { "question": "What is a default route?", "answer": "A default route is used as a last resort if no other routes match", "difficulty": "easy" },
            { "question": "What is the Class A default subnet mask?", "answer": "255.0.0.0 or /8", "difficulty": "easy" },
            { "question": "What is the Class B default subnet mask?", "answer": "255.255.0.0 or /16", "difficulty": "easy" },
            { "question": "What is the Class C default subnet mask?", "answer": "255.255.255.0 or /24", "difficulty": "easy" },
            { "question": "What does CIDR stand for?", "answer": "Classless Inter-Domain Routing", "difficulty": "easy" },
            { "question": "What is the range of Class A IP addresses?", "answer": "1.0.0.0 to 126.255.255.255", "difficulty": "easy" },
            { "question": "What is the range of Class B IP addresses?", "answer": "128.0.0.0 to 191.255.255.255", "difficulty": "easy" },
            { "question": "What is the range of Class C IP addresses?", "answer": "192.0.0.0 to 223.255.255.255", "difficulty": "easy" },
            { "question": "What is the loopback IP address in IPv4?", "answer": "127.0.0.0/8", "difficulty": "easy" },
            { "question": "What is the broadcast address for all IPv4 networks?", "answer": "255.255.255.255", "difficulty": "easy" },
            { "question": "What does /24 mean in CIDR notation?", "answer": "Subnet mask of 255.255.255.0", "difficulty": "easy" },
            { "question": "What is the number of hosts in a /24 network?", "answer": "254 usable hosts", "difficulty": "easy" },
            { "question": "What is the wildcard mask for /24?", "answer": "0.0.0.255", "difficulty": "easy" },
            { "question": "Convert /16 to dotted decimal subnet mask.", "answer": "255.255.0.0", "difficulty": "easy" },
            { "question": "What is the network address for 192.168.1.100/24?", "answer": "192.168.1.0", "difficulty": "easy" },
            { "question": "What is the broadcast address for 10.0.0.50/8?", "answer": "10.255.255.255", "difficulty": "easy" },
            { "question": "How many subnets can you create with 2 subnet bits?", "answer": "4 subnets", "difficulty": "easy" },
            { "question": "How many hosts per subnet with 2 host bits?", "answer": "2 usable hosts", "difficulty": "easy" },
            { "question": "What is the subnet mask for Class A in binary?", "answer": "11111111.00000000.00000000.00000000", "difficulty": "easy" },
            { "question": "What is VLSM?", "answer": "Variable Length Subnet Masking, allowing different subnet sizes within the same network", "difficulty": "easy" },
            { "question": "What is FLSM?", "answer": "Fixed Length Subnet Masking, using the same subnet size for all subnets", "difficulty": "easy" },
            { "question": "What is the first private IP range?", "answer": "10.0.0.0/8", "difficulty": "easy" },
            { "question": "What is the last private IP range?", "answer": "172.16.0.0/12 to 172.31.255.255/16", "difficulty": "easy" },
            { "question": "What is APIPA range?", "answer": "169.254.0.0/16", "difficulty": "easy" },
            { "question": "Convert 255.255.255.192 to CIDR.", "answer": "/26", "difficulty": "easy" },
            { "question": "What is the increment for /26?", "answer": "64", "difficulty": "easy" },
            { "question": "How many usable hosts in /30?", "answer": "2", "difficulty": "easy" },
            { "question": "What is the subnet for 172.16.10.5/20?", "answer": "172.16.0.0/20", "difficulty": "easy" },
            { "question": "What is supernetting?", "answer": "Combining multiple networks into a larger one, also called route summarization", "difficulty": "easy" },
            { "question": "What is the /8 equivalent in binary?", "answer": "First 8 bits are 1s", "difficulty": "easy" },
            { "question": "Identify the class of 200.10.20.30.", "answer": "Class C", "difficulty": "easy" },
            { "question": "What is the default gateway typically?", "answer": "First usable IP in the subnet", "difficulty": "easy" },
            { "question": "What is a /32 address?", "answer": "Single host address", "difficulty": "easy" },
            { "question": "Convert /27 to dotted decimal.", "answer": "255.255.255.224", "difficulty": "easy" },
            { "question": "How many subnets in a Class C with 3 subnet bits?", "answer": "8", "difficulty": "easy" },
            { "question": "How many hosts in a Class B /18?", "answer": "16382 usable", "difficulty": "easy" },
            { "question": "What is the binary for 255?", "answer": "11111111", "difficulty": "easy" },
            { "question": "What is the binary for 128?", "answer": "10000000", "difficulty": "easy" },
            { "question": "What is the binary for 192?", "answer": "11000000", "difficulty": "easy" },
            { "question": "What is the binary for 224?", "answer": "11100000", "difficulty": "easy" },
            { "question": "What is the binary for 240?", "answer": "11110000", "difficulty": "easy" },
            { "question": "What is the binary for 248?", "answer": "11111000", "difficulty": "easy" },
            { "question": "What is the binary for 252?", "answer": "11111100", "difficulty": "easy" },
            { "question": "What is the binary for 254?", "answer": "11111110", "difficulty": "easy" },
            { "question": "What is the decimal for 11111111?", "answer": "255", "difficulty": "easy" },
            { "question": "What is the decimal for 11111110?", "answer": "254", "difficulty": "easy" },
            { "question": "What is the decimal for 11111100?", "answer": "252", "difficulty": "easy" },
            { "question": "What is the decimal for 11111000?", "answer": "248", "difficulty": "easy" },
            { "question": "What is the decimal for 11110000?", "answer": "240", "difficulty": "easy" },
            { "question": "What is the decimal for 11100000?", "answer": "224", "difficulty": "easy" },
            { "question": "What is the decimal for 11000000?", "answer": "192", "difficulty": "easy" },
            { "question": "What is the decimal for 10000000?", "answer": "128", "difficulty": "easy" },
            { "question": "How many bits in a subnet mask?", "answer": "32", "difficulty": "easy" },
            { "question": "What is the range of public IP addresses?", "answer": "1.0.0.0 to 223.255.255.255 (excluding private)", "difficulty": "easy" },
            { "question": "What is the /0 mask?", "answer": "0.0.0.0 - default route", "difficulty": "easy" },
            { "question": "What is the increment for /25?", "answer": "128", "difficulty": "medium" },
            { "question": "Find the network address for 192.168.5.130/26.", "answer": "192.168.5.128/26", "difficulty": "medium" },
            { "question": "What is the broadcast for 10.1.2.50/28?", "answer": "10.1.2.63", "difficulty": "medium" },
            { "question": "How many usable hosts in /25?", "answer": "126", "difficulty": "medium" },
            { "question": "Subnet 192.168.1.0/24 into 8 subnets. What is the mask?", "answer": "/27 or 255.255.255.224", "difficulty": "medium" },
            { "question": "First subnet for 172.16.0.0/16 with /20 mask?", "answer": "172.16.0.0/20", "difficulty": "medium" },
            { "question": "Last usable IP for 203.0.113.64/27?", "answer": "203.0.113.94", "difficulty": "medium" },
            { "question": "How many subnets in Class C with /28 mask?", "answer": "16", "difficulty": "medium" },
            { "question": "What is the wildcard for 255.255.255.240?", "answer": "0.0.0.15", "difficulty": "medium" },
            { "question": "Convert 10.0.0.0/12 to number of networks.", "answer": "4096 /24 networks", "difficulty": "medium" },
            { "question": "Find the subnet for 192.168.100.200/23.", "answer": "192.168.100.0/23", "difficulty": "medium" },
            { "question": "How many hosts in /22?", "answer": "1022 usable", "difficulty": "medium" },
            { "question": "Broadcast for 172.20.10.33/27?", "answer": "172.20.10.63", "difficulty": "medium" },
            { "question": "Subnet 10.10.10.0/24 for 50 hosts. What mask?", "answer": "/26 or 255.255.255.192", "difficulty": "medium" },
            { "question": "Number of subnets with 5 subnet bits in Class B.", "answer": "32", "difficulty": "medium" },
            { "question": "First usable IP for 198.51.100.0/30?", "answer": "198.51.100.1", "difficulty": "medium" },
            { "question": "What is /29 in binary mask?", "answer": "11111111.11111111.11111111.11111000", "difficulty": "medium" },
            { "question": "Subnet range for 192.0.2.0/25 second subnet.", "answer": "192.0.2.128/25", "difficulty": "medium" },
            { "question": "How many /30 subnets in a /24?", "answer": "64", "difficulty": "medium" },
            { "question": "Wildcard for /23?", "answer": "0.0.1.255", "difficulty": "medium" },
            { "question": "Network address for 203.0.113.5/28?", "answer": "203.0.113.0/28", "difficulty": "medium" },
            { "question": "Hosts per subnet in Class A /13?", "answer": "524286 usable", "difficulty": "medium" },
            { "question": "Increment for /29?", "answer": "8", "difficulty": "medium" },
            { "question": "Broadcast for 10.10.255.240/28?", "answer": "10.10.255.255", "difficulty": "medium" },
            { "question": "Subnet 172.16.0.0/16 into 16 subnets. Mask?", "answer": "/20", "difficulty": "medium" },
            { "question": "Last subnet for 192.168.0.0/24 with /27?", "answer": "192.168.0.224/27", "difficulty": "medium" },
            { "question": "Usable hosts in /23?", "answer": "510", "difficulty": "medium" },
            { "question": "Find subnet for 172.16.45.130/22.", "answer": "172.16.44.0/22", "difficulty": "medium" },
            { "question": "How many /25 in a /16?", "answer": "512", "difficulty": "medium" },
            { "question": "Wildcard for 255.255.252.0?", "answer": "0.0.3.255", "difficulty": "medium" },
            { "question": "First usable for 10.0.0.0/8?", "answer": "10.0.0.1", "difficulty": "medium" },
            { "question": "Number of subnets for Class C /27?", "answer": "8", "difficulty": "medium" },
            { "question": "Broadcast for 192.168.1.129/25?", "answer": "192.168.1.255", "difficulty": "medium" },
            { "question": "Subnet 10.0.0.0/8 for 1000 hosts. Mask?", "answer": "/22", "difficulty": "medium" },
            { "question": "Increment for /22?", "answer": "4", "difficulty": "medium" },
            { "question": "Network for 172.30.200.150/23?", "answer": "172.30.200.0/23", "difficulty": "medium" },
            { "question": "Hosts in /28?", "answer": "14 usable", "difficulty": "medium" },
            { "question": "Last usable for 203.0.113.32/27?", "answer": "203.0.113.62", "difficulty": "medium" },
            { "question": "How many bits for 16 subnets?", "answer": "4 subnet bits", "difficulty": "medium" },
            { "question": " /20 to dotted decimal?", "answer": "255.255.240.0", "difficulty": "medium" },
            { "question": "Subnet 192.168.10.0/24 into /28. How many subnets?", "answer": "16", "difficulty": "medium" },
            { "question": "Wildcard for /28?", "answer": "0.0.0.15", "difficulty": "medium" },
            { "question": "Broadcast for 10.10.10.100/30?", "answer": "10.10.10.103", "difficulty": "medium" },
            { "question": "Using VLSM on 192.168.1.0/24, allocate for 100 hosts. What subnet?", "answer": "192.168.1.0/25 (128 hosts)", "difficulty": "hard" },
            { "question": "For 10.0.0.0/16, create VLSM for 500, 200, 100 hosts. List subnets.", "answer": "10.0.0.0/23 (510), 10.0.2.0/24 (254), 10.0.3.0/25 (126)", "difficulty": "hard" },
            { "question": "Supernet 192.168.0.0/24 and 192.168.1.0/24. What summary?", "answer": "192.168.0.0/23", "difficulty": "hard" },
            { "question": "Given 172.16.0.0/16, VLSM for departments: 2000, 1000, 500, 250, 125 hosts. Assign masks and ranges.", "answer": "/21 (2046), /22 (1022), /23 (510), /24 (254), /25 (126) - starting from 172.16.0.0", "difficulty": "hard" },
            { "question": "Calculate the number of subnets and hosts for 192.168.0.0/16 with /21 mask.", "answer": "2^(21-16)=32 subnets, each with 2^(32-21)-2=2046 hosts", "difficulty": "hard" },
            { "question": "Using VLSM on 203.0.113.0/24 for 4 subnets: 50, 30, 20, 10 hosts. List all ranges.", "answer": "/26 (62) 203.0.113.0-63, /27 (30) 203.0.113.64-95, /28 (14) 203.0.113.96-111, /28 (14) 203.0.113.112-127", "difficulty": "hard" },
            { "question": "Supernet the following: 172.16.4.0/24, 172.16.5.0/24, 172.16.6.0/24, 172.16.7.0/24.", "answer": "172.16.4.0/22", "difficulty": "hard" },
            { "question": "For a network 10.0.0.0/8, how many /24 subnets are there?", "answer": "65536", "difficulty": "hard" },
            { "question": "Design VLSM for 192.0.2.0/24: subnets for 100, 50, 25, 12 hosts, efficient allocation.", "answer": "/25 192.0.2.0/25 (126), /26 192.0.2.128/26 (62), /27 192.0.2.192/27 (30), /28 192.0.2.224/28 (14)", "difficulty": "hard" },
            { "question": "What is the smallest summary for 198.51.100.0/26 and 198.51.100.64/26?", "answer": "198.51.100.0/25", "difficulty": "hard" },
            { "question": "Calculate VLSM for Class B 172.20.0.0/16: 8 subnets of 4000 hosts each.", "answer": "/19 mask (8190 hosts), 8 subnets: 172.20.0.0, 172.20.32.0, etc.", "difficulty": "hard" },
            { "question": "Find overlapping issue in VLSM: allocate /26 then /25 in same space.", "answer": " /25 would overlap the /26 if not careful; must allocate non-overlapping.", "difficulty": "hard" },
            { "question": "For 203.0.113.0/24, VLSM for 3 subnets: 100, 50, 20 hosts. Ranges?", "answer": "/25 203.0.113.0-127 (126 usable), /26 203.0.113.128-191 (62 usable), /27 203.0.113.192-223 (30 usable)", "difficulty": "hard" },
            { "question": "How many bits to borrow for 64 subnets in Class A?", "answer": "6 bits (2^6=64)", "difficulty": "hard" },
            { "question": "Summary route for 192.168.100.0/24 to 192.168.103.0/24.", "answer": "192.168.100.0/22", "difficulty": "hard" },
            { "question": "VLSM on 172.16.0.0/16 for serial links (/30) 5, LANs (/24) 3. Allocate.", "answer": "LANs: 172.16.0.0/24, 172.16.1.0/24, 172.16.2.0/24; Serial: 172.16.3.0/30, etc.", "difficulty": "hard" },
            { "question": "What is the CIDR for mask 255.255.255.252?", "answer": "/30", "difficulty": "hard" },
            { "question": "Find if 10.10.10.10/8 is valid in private range.", "answer": "Yes, within 10.0.0.0/8", "difficulty": "hard" },
            { "question": "Design VLSM for 50 hosts, then 25 in remaining space.", "answer": "/26 for 50 (62), then /27 for 25 (30) in next block.", "difficulty": "hard" },
            { "question": "Supernet Class C blocks 200.10.20.0/24 to 200.10.23.0/24.", "answer": "200.10.20.0/22", "difficulty": "hard" },
            { "question": "Calculate hosts for /9 in Class A.", "answer": "131070 usable", "difficulty": "hard" },
            { "question": "VLSM efficiency for allocating /27 when needing 20 hosts.", "answer": "30 usable hosts, so 10 addresses are wasted (30-20)", "difficulty": "hard" },
            { "question": "Allocate VLSM for 400 hosts in 10.0.0.0/16.", "answer": "/23 (510 usable), 10.0.0.0/23", "difficulty": "hard" },
            { "question": "What mask for exactly 1000 hosts? (closest)", "answer": "/22 (1022 usable)", "difficulty": "hard" },
            { "question": "Find the subnet boundary for IP 192.0.2.150/23.", "answer": "Network: 192.0.2.0. Broadcast: 192.0.3.255", "difficulty": "hard" },
            { "question": "Using VLSM, how to avoid overlap in allocation?", "answer": "Allocate in order of largest to smallest subnet, using sequential non-overlapping blocks.", "difficulty": "hard" },
            { "question": "Supernet 10.64.0.0/18 and 10.96.0.0/18.", "answer": "10.64.0.0/17", "difficulty": "hard" },
            { "question": "Number of /28 subnets in /20.", "answer": "2^(28-20) = 2^8 = 256", "difficulty": "hard" },
            { "question": "Calculate VLSM table for 192.168.10.0/24: subnets for 60, 30, 14 hosts.", "answer": "/26 (62h) 192.168.10.0-63, /27 (30h) 64-95, /28 (14h) 96-111", "difficulty": "hard" },
            { "question": "What is the longest prefix match for 172.16.5.10 between /16 and /20?", "answer": "/20", "difficulty": "hard" },
            { "question": "Design supernet for 4 contiguous /24 networks.", "answer": "/22", "difficulty": "hard" },
            { "question": "VLSM for WAN links /30 and LAN /23 in 172.18.0.0/16.", "answer": "LAN 172.18.0.0/23, WAN 172.18.2.0/30 etc.", "difficulty": "hard" },
            { "question": "Summary route for non-contiguous 192.168.1.0/24 and 192.168.3.0/24.", "answer": "Cannot summarize without including 192.168.2.0/24; use two separate routes.", "difficulty": "hard" },
            { "question": "Calculate the CIDR for mask 255.255.128.0.", "answer": "/17", "difficulty": "hard" },
            { "question": "What is the binary representation of the subnet mask /13?", "answer": "11111111.11111000.00000000.00000000", "difficulty": "hard" },
            { "question": "Using VLSM, optimize for 200 hosts in 172.16.0.0/20 remaining space after two /24.", "answer": "After 172.16.0.0/24 and 172.16.1.0/24, next available is 172.16.2.0. Use /23 for 200 hosts (510 usable).", "difficulty": "hard" },
            { "question": "Find the optimal VLSM mask for exactly 500 hosts.", "answer": "/23 (510 usable)", "difficulty": "hard" },
            { "question": "Supernet 203.0.113.0/25 and 203.0.113.128/25.", "answer": "203.0.113.0/24", "difficulty": "hard" },
            { "question": "VLSM for point-to-point /30, department /25, server /27 in 10.10.0.0/16.", "answer": "Dept 10.10.0.0/25, Server 10.10.0.128/27, P2P 10.10.0.160/30", "difficulty": "hard" },
            { "question": "What is the subnet ID for IP 198.51.100.200 with mask /23?", "answer": "198.51.100.0", "difficulty": "hard" },
            { "question": "Design a VLSM scheme for a company with 5 departments: 300, 150, 75, 40, 20 hosts in a /18 network.", "answer": "/23 (510), /24 (254), /25 (126), /26 (62), /27 (30). Allocate sequentially from the /18 block.", "difficulty": "hard" },
            { "question": "Summary route for 172.16.32.0/20, 172.16.48.0/20, 172.16.64.0/20.", "answer": "These are not contiguous. The first two can be summarized to 172.16.32.0/19.", "difficulty": "hard" },
            { "question": "Is 192.168.100.50/16 a valid private address?", "answer": "Yes, it falls within the 192.168.0.0/16 range.", "difficulty": "hard" },
            { "question": "VLSM allocation avoiding waste for 62 hosts exactly.", "answer": "/26 (62 usable)", "difficulty": "hard" },
            { "question": "What mask allows 8 subnets in Class C with max hosts?", "answer": "Borrow 3 bits from the host portion of a /24, resulting in a /27 mask. This creates 8 subnets, each with 30 usable hosts.", "difficulty": "hard" },
            { "question": "Find the VLSM block for the 4th largest subnet in a scheme for 1000, 500, 250, 125 hosts.", "answer": "/25 for 125 hosts", "difficulty": "hard" },
            { "question": "Supernet non-adjacent /24s: 10.10.1.0 and 10.10.3.0.", "answer": "A summary would be 10.10.0.0/22, but this includes the unused 10.10.0.0/24 and 10.10.2.0/24.", "difficulty": "hard" },
            { "question": "Calculate total IPs used in VLSM for 3 /30 and 2 /24.", "answer": "3*4 + 2*256 = 12 + 512 = 524", "difficulty": "hard" },
            { "question": "What is the prefix length for 255.255.254.0?", "answer": "/23", "difficulty": "hard" },
            { "question": "Optimize VLSM for minimal waste in /24 for 4 subnets of 14 hosts each.", "answer": "Use four /28 subnets. Each provides 14 usable hosts, fitting perfectly.", "difficulty": "hard" },
            { "question": "Detect error in allocation if /26 followed by /27 overlapping.", "answer": "If /26 is 192.168.1.0-63, a /27 starting at 192.168.1.32 would overlap.", "difficulty": "hard" },
            { "question": "The mask for 2^10 hosts approx.", "answer": "/22 (1022 usable hosts)", "difficulty": "hard" },
            { "question": "Supernet 172.16.0.0/23 and 172.16.2.0/23.", "answer": "172.16.0.0/22", "difficulty": "hard" },
            { "question": "Full VLSM table for 10.0.0.0/24: 120, 60, 30, 15 hosts.", "answer": "Not possible, the sum of hosts (225) + network/broadcast addresses exceeds the 256 available in a /24.", "difficulty": "hard" },
            { "question": "How does CIDR affect routing tables?", "answer": "Reduces their size by allowing route summarization (aggregation).", "difficulty": "hard" },
            { "question": "Calculate the number of wasted IPs in supernetting 8 /24 to /21.", "answer": "None. A /21 block contains exactly 2048 addresses, same as 8 * 256.", "difficulty": "hard" },
            { "question": "VLSM for mobile users 5 /30 in remaining after LAN /20.", "answer": "After 10.0.0.0/20 (10.0.0.0-10.0.15.255), start at 10.0.16.0/30, 10.0.16.4/30, etc.", "difficulty": "hard" },
            { "question": "What is the binary for wildcard 0.0.0.63?", "answer": "00000000.00000000.00000000.00111111", "difficulty": "hard" },
            { "question": "Design a hierarchical addressing scheme using VLSM for campus network.", "answer": "Core /16, buildings /20, floors /24, labs /28.", "difficulty": "hard" },
            { "question": "Find the LPM for IP 10.10.10.10 with routes /8, /16, /24.", "answer": "/24", "difficulty": "hard" },
            { "question": "Optimize supernet for 172.16.64.0/18 to 172.16.127.0/18.", "answer": "These are two separate subnets within 172.16.0.0/17. A summary would be 172.16.0.0/16 but includes more.", "difficulty": "hard" },
            { "question": "What mask for 4096 hosts?", "answer": "/20 (4094 usable hosts)", "difficulty": "hard" },
            { "question": "Summary route calculation for OSPF area.", "answer": "Use the `area range` command on an ABR to summarize routes into a single prefix.", "difficulty": "hard" },
            { "question": "The /12 private range start.", "answer": "172.16.0.0", "difficulty": "hard" },
            { "question": "Binary calculation for subnet increment 32.", "answer": "The block size is 32, so the mask is /27. The last octet binary is 11100000.", "difficulty": "hard" },
            { "question": "Supernet efficiency for 16 /25 to /21.", "answer": "A /21 is 2048 IPs. 16 * 128 IPs (/25) = 2048 IPs. It's 100% efficient.", "difficulty": "hard" },
            { "question": "VLSM for VoIP /28, data /23, management /25 in /16.", "answer": "Data 10.0.0.0/23, Mgmt 10.0.2.0/25, VoIP 10.0.2.128/28", "difficulty": "hard" },
            { "question": "What is the CIDR notation for wildcard 0.0.15.255?", "answer": "/20", "difficulty": "hard" },
            { "question": "Calculate the route summarization for branch offices 10.10.40.0/22 to 10.10.43.0/22.", "answer": "This covers four /22 networks. The summary is 10.10.40.0/20.", "difficulty": "hard" },
            { "question": "Find the mask for 2^20 IPs.", "answer": "/12 (32-20=12)", "difficulty": "hard" },
            { "question": "The inverse mask for ACL matching /25.", "answer": "0.0.0.127", "difficulty": "hard" },
            { "question": "Supernet 199.116.160.0/20 and 199.116.176.0/20.", "answer": "199.116.160.0/19", "difficulty": "hard" },
            { "question": "Design VLSM for DMZ /27, internal /19, external /22 in /16.", "answer": "Internal 172.16.0.0/19, External 172.16.32.0/22, DMZ 172.16.36.0/27", "difficulty": "hard" },
            { "question": "What is the binary for /28 increment?", "answer": "16 (00010000)", "difficulty": "hard" },
            { "question": "Optimal summary for routes 10.0.0.0/23, 10.0.2.0/23, 10.0.4.0/23.", "answer": "The first two summarize to 10.0.0.0/22. The third is separate. To cover all three, 10.0.0.0/21 is the smallest summary.", "difficulty": "hard" },
            { "question": "VLSM for 10 point-to-point links and 2 LANs of 500 hosts in /20.", "answer": "LANs get /23 each. Then 10 /30 subnets for the links.", "difficulty": "hard" },
            { "question": "The prefix for mask 255.248.0.0.", "answer": "/13", "difficulty": "hard" },
            { "question": "Advanced subnet calc: IP 172.16.254.129/23 network and broadcast.", "answer": "Network: 172.16.254.0, Broadcast: 172.16.255.255", "difficulty": "hard" },
            { "question": "Supernet calculation for 8 contiguous /23 networks.", "answer": "/20", "difficulty": "hard" },
            { "question": "Allocate VLSM blocks for VLANs 10,20,30 hosts in 192.168.100.0/24.", "answer": "30 hosts needs /27 (30 usable). 20 hosts needs /27. 10 hosts needs /28. Allocate sequentially: .0/27, .32/27, .64/28.", "difficulty": "hard" },
            { "question": "Find LPM in routing table for 192.0.2.5 with entries /24 192.0.2.0, /23 192.0.0.0.", "answer": "/24", "difficulty": "hard" },
            { "question": "The wildcard mask for matching /29 subnets.", "answer": "0.0.0.7", "difficulty": "hard" },
            { "question": "Design supernet for regional offices 10.20.0.0/20 to 10.27.0.0/20.", "answer": "Not possible to cleanly summarize this range.", "difficulty": "hard" },
            { "question": "VLSM for security zones: high /26, medium /27, low /28 in /24.", "answer": "High: .0/26, Med: .64/27, Low: .96/28", "difficulty": "hard" },
            { "question": "Calculate the number of /32 addresses in a /16.", "answer": "65536", "difficulty": "hard" },
            { "question": "Binary to decimal for subnet calc: 11111000.", "answer": "248", "difficulty": "hard" },
            { "question": "The mask for 2^8 subnets in Class B.", "answer": "/24 (16+8)", "difficulty": "hard" }
        ];

        // Main Application Logic
        let currentTab = 'practice';
        let currentPracticeDifficulty = 'easy';
        let currentWildcardDifficulty = 'easy';
        let isDarkMode = false;
        let practiceAnswers = null;
        let wildcardAnswers = null;
        let lastFocusedElement;
        
        // Flashcard State
        let currentFlashcardDifficulty = 'easy';
        let currentFlashcard = null;
        let isFlashcardRevealed = false;

        document.addEventListener('DOMContentLoaded', () => {
          init();
          loadTheme();
          setupEventListeners();
          updateCalculator();
        });

        function init() {
          generatePracticeProblem();
          generateWildcardProblem();
          setFlashcardDifficulty('easy');
        }

        // --- Modal Logic ---
        function openModal(modalId) {
            lastFocusedElement = document.activeElement;
            const modal = document.getElementById(modalId);
            if (!modal) return;
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            modal.addEventListener('click', handleModalOverlayClick);
            document.addEventListener('keydown', handleEscapeKey);
            modal.querySelector('button[id$="-close"]')?.focus();
        }

        function closeModal() {
            const openModal = document.querySelector('.fixed.inset-0.flex:not(.hidden)');
            if (openModal) {
                openModal.classList.add('hidden');
                openModal.classList.remove('flex');
                openModal.removeEventListener('click', handleModalOverlayClick);
                document.removeEventListener('keydown', handleEscapeKey);
                lastFocusedElement?.focus();
            }
        }

        function handleModalOverlayClick(event) {
            if (event.target === event.currentTarget) {
                closeModal();
            }
        }

        function handleEscapeKey(event) {
            if (event.key === 'Escape') {
                closeModal();
            }
        }
        
        function setupEventListeners() {
          document.querySelectorAll('.tab-button').forEach(btn => btn.addEventListener('click', (e) => switchTab(e.currentTarget.dataset.tab)));
          document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
          document.getElementById('help-button').addEventListener('click', () => openModal('help-modal'));
          document.getElementById('help-close').addEventListener('click', closeModal);
          document.getElementById('subnet-list-close').addEventListener('click', closeModal);
          setupPracticeMode();
          setupWildcardMode();
          setupCalculatorMode();
          setupFlashcardsMode();
        }

        function setupPracticeMode() {
          document.querySelectorAll('.difficulty-btn').forEach(btn => btn.addEventListener('click', (e) => setPracticeDifficulty(e.currentTarget.dataset.difficulty)));
          document.getElementById('practice-new-btn').addEventListener('click', generatePracticeProblem);
          document.querySelectorAll('#practice-tab-content .practice-field').forEach(fieldEl => {
              const field = fieldEl.querySelector('.practice-input').dataset.field;
              fieldEl.querySelector('.check-btn').addEventListener('click', () => checkPracticeField(field));
              fieldEl.querySelector('.show-btn').addEventListener('click', () => showPracticeAnswer(field));
          });
          document.querySelectorAll('.practice-input').forEach(input => {
            input.addEventListener('input', (e) => {
              const field = e.target.dataset.field;
              const parent = e.target.closest('.practice-field');
              const checkBtn = parent.querySelector('.check-btn');
              if (e.target.value.trim()) checkBtn.classList.remove('hidden');
              else checkBtn.classList.add('hidden');
              e.target.classList.remove('field-correct', 'field-incorrect');
              parent.querySelector('.status-icon').innerHTML = '';
            });
          });
          document.getElementById('practice-show-all').addEventListener('click', showAllPracticeAnswers);
          document.getElementById('practice-check-all').addEventListener('click', checkAllPracticeAnswers);
        }

        function setupWildcardMode() {
            document.querySelectorAll('.wildcard-difficulty-btn').forEach(btn => btn.addEventListener('click', (e) => setWildcardDifficulty(e.currentTarget.dataset.difficulty)));
            document.getElementById('wildcard-new-btn').addEventListener('click', generateWildcardProblem);
            document.querySelectorAll('#wildcard-tab-content .wildcard-input').forEach(input => {
                const field = input.dataset.field;
                const parent = input.closest('.flex');
                const checkBtn = parent.querySelector('.wildcard-check-btn');
                const showBtn = parent.querySelector('.wildcard-show-btn');
                if (checkBtn) checkBtn.addEventListener('click', () => checkWildcardField(field));
                if (showBtn) showBtn.addEventListener('click', () => showWildcardAnswer(field));
                input.addEventListener('input', (e) => {
                    if (checkBtn) {
                        if (e.target.value.trim()) checkBtn.classList.remove('hidden');
                        else checkBtn.classList.add('hidden');
                    }
                    e.target.classList.remove('field-correct', 'field-incorrect');
                    parent.querySelector('.status-icon').innerHTML = '';
                });
            });
            document.getElementById('wildcard-show-all').addEventListener('click', showAllWildcardAnswers);
            document.getElementById('wildcard-check-all').addEventListener('click', checkAllWildcardAnswers);
        }

        function setupCalculatorMode() {
          const ipInput = document.getElementById('calc-ip');
          const cidrInput = document.getElementById('calc-cidr');
          ipInput.addEventListener('input', updateCalculator);
          cidrInput.addEventListener('input', updateCalculator);
          document.getElementById('calc-prev').addEventListener('click', () => {
            const info = getCalculatorInfo();
            if (info) {
              const prev = SubnetMath.getPreviousSubnet(info.network, info.cidr);
              ipInput.value = prev;
              updateCalculator();
            }
          });
          document.getElementById('calc-list-subnets').addEventListener('click', () => {
              const info = getCalculatorInfo();
              if (info) {
                  showSubnetList(info);
                  openModal('subnet-list-modal');
              } else {
                  alert('Please enter a valid IP address and CIDR mask first.');
              }
          });
          document.getElementById('calc-next').addEventListener('click', () => {
            const info = getCalculatorInfo();
            if (info) {
              const next = SubnetMath.getNextSubnet(info.network, info.cidr);
              ipInput.value = next;
              updateCalculator();
            }
          });
          document.getElementById('calc-binary-toggle').addEventListener('click', (e) => {
            const binaryDiv = document.getElementById('calc-binary');
            const isHidden = binaryDiv.classList.toggle('hidden');
            const isExpanded = !isHidden;
            e.currentTarget.textContent = isHidden ? 'Show Binary Breakdown' : 'Hide Binary Breakdown';
            e.currentTarget.setAttribute('aria-expanded', isExpanded);
          });
        }
        
        function setupFlashcardsMode() {
            document.querySelectorAll('.fc-difficulty-button').forEach(btn => {
                btn.addEventListener('click', () => setFlashcardDifficulty(btn.dataset.difficulty));
            });
            document.getElementById('fc-reveal-btn').addEventListener('click', handleRevealFlashcard);
            document.getElementById('fc-next-btn').addEventListener('click', handleNextFlashcard);
        }

        function switchTab(tab) {
          currentTab = tab;
          document.querySelectorAll('.tab-button').forEach(btn => {
            const isSelected = btn.dataset.tab === tab;
            btn.classList.toggle('tab-active', isSelected);
            btn.classList.toggle('text-gray-500', !isSelected);
            btn.classList.toggle('border-transparent', !isSelected);
            btn.setAttribute('aria-selected', isSelected);
            btn.setAttribute('tabindex', isSelected ? '0' : '-1');
          });
          document.querySelectorAll('.tab-content').forEach(content => content.classList.add('hidden'));
          document.getElementById(`${tab}-tab-content`).classList.remove('hidden');
        }

        function setPracticeDifficulty(difficulty) {
          currentPracticeDifficulty = difficulty;
          document.querySelectorAll('.difficulty-btn').forEach(btn => {
            const isActive = btn.dataset.difficulty === difficulty;
            btn.classList.toggle('border-blue-600', isActive);
            btn.classList.toggle('bg-blue-600', isActive);
            btn.classList.toggle('text-white', isActive);
            btn.classList.toggle('border-gray-300', !isActive);
            btn.classList.toggle('text-gray-700', !isActive);
            btn.setAttribute('aria-checked', isActive);
          });
          const descriptions = {
            easy: 'Standard subnets (/24, /16) - Perfect for beginners',
            medium: 'Variable subnets (/20-/27) - Building confidence',
            hard: 'Complex subnets (/18-/30) - Master level'
          };
          document.getElementById('difficulty-desc').textContent = descriptions[difficulty];
          generatePracticeProblem();
        }

        function setWildcardDifficulty(difficulty) {
            currentWildcardDifficulty = difficulty;
            document.querySelectorAll('.wildcard-difficulty-btn').forEach(btn => {
                const isActive = btn.dataset.difficulty === difficulty;
                btn.classList.toggle('border-blue-600', isActive);
                btn.classList.toggle('bg-blue-600', isActive);
                btn.classList.toggle('text-white', isActive);
                btn.classList.toggle('border-gray-300', !isActive);
                btn.classList.toggle('text-gray-700', !isActive);
                btn.setAttribute('aria-checked', isActive);
            });
            const descriptions = {
                easy: 'Standard subnets (/24, /16) - Perfect for beginners',
                medium: 'Variable subnets (/20-/27) - Building confidence',
                hard: 'Complex subnets (/18-/30) - Master level'
            };
            document.getElementById('wildcard-difficulty-desc').textContent = descriptions[difficulty];
            generateWildcardProblem();
        }

        function generatePracticeProblem() {
          const problem = SubnetMath.generateRandomIp(currentPracticeDifficulty);
          document.getElementById('practice-ip').value = problem.ip;
          document.getElementById('practice-cidr').value = problem.cidr;
          practiceAnswers = SubnetMath.calculateSubnetInfo(problem.ip, problem.cidr);
          document.querySelectorAll('.practice-input').forEach(input => {
            input.value = '';
            input.classList.remove('field-correct', 'field-incorrect');
          });
          document.querySelectorAll('.practice-field .status-icon').forEach(icon => icon.innerHTML = '');
          document.querySelectorAll('.check-btn').forEach(btn => btn.classList.add('hidden'));
          document.querySelectorAll('.practice-field .show-btn').forEach(btn => btn.classList.remove('hidden'));
          if(practiceAnswers) {
            document.getElementById('practice-stats').classList.remove('hidden');
            document.getElementById('stats-class').textContent = practiceAnswers.classType;
            document.getElementById('stats-mask').textContent = practiceAnswers.mask;
            document.getElementById('stats-hosts').textContent = practiceAnswers.usableHosts;
          } else {
             document.getElementById('practice-stats').classList.add('hidden');
          }
        }

        function checkPracticeField(field) {
          if (!practiceAnswers) return;
          const input = document.querySelector(`#practice-tab-content .practice-input[data-field="${field}"]`);
          const isCorrect = input.value.trim() === practiceAnswers[field];
          const statusIcon = input.closest('.practice-field').querySelector('.status-icon');
          input.classList.toggle('field-correct', isCorrect);
          input.classList.toggle('field-incorrect', !isCorrect);
          statusIcon.innerHTML = isCorrect
            ? '<svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="sr-only">Correct</span>'
            : '<svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="sr-only">Incorrect</span>';
        }

        function showPracticeAnswer(field) {
          if (!practiceAnswers) return;
          const input = document.querySelector(`#practice-tab-content .practice-input[data-field="${field}"]`);
          const parent = input.closest('.practice-field');
          input.value = practiceAnswers[field];
          checkPracticeField(field); // Reuse check logic to set styles
          parent.querySelector('.check-btn').classList.add('hidden');
          parent.querySelector('.show-btn').classList.add('hidden');
        }

        function showAllPracticeAnswers() {
          ['network', 'firstHost', 'lastHost', 'broadcast'].forEach(showPracticeAnswer);
        }

        function checkAllPracticeAnswers() {
          ['network', 'firstHost', 'lastHost', 'broadcast'].forEach(field => {
            if (document.querySelector(`#practice-tab-content .practice-input[data-field="${field}"]`).value.trim()) {
              checkPracticeField(field);
            }
          });
        }

        function generateWildcardProblem() {
          const problem = SubnetMath.generateRandomIp(currentWildcardDifficulty);
          document.getElementById('wildcard-ip').value = problem.ip;
          document.getElementById('wildcard-cidr').value = problem.cidr;
          wildcardAnswers = SubnetMath.calculateSubnetInfo(problem.ip, problem.cidr);
          document.querySelectorAll('#wildcard-tab-content .wildcard-input').forEach(input => {
              input.value = '';
              input.classList.remove('field-correct', 'field-incorrect');
              const parent = input.closest('.flex');
              parent.querySelector('.status-icon').innerHTML = '';
              const checkBtn = parent.querySelector('.wildcard-check-btn');
              if (checkBtn) checkBtn.classList.add('hidden');
              parent.querySelector('.wildcard-show-btn')?.classList.remove('hidden');
          });
          if (wildcardAnswers) {
              document.getElementById('wildcard-reference').classList.remove('hidden');
              document.getElementById('wildcard-ref-mask').textContent = wildcardAnswers.mask;
              document.getElementById('wildcard-ref-network').textContent = wildcardAnswers.network;
              document.getElementById('wildcard-ref-broadcast').textContent = wildcardAnswers.broadcast;
          } else {
              document.getElementById('wildcard-reference').classList.add('hidden');
          }
        }

        function checkWildcardField(field) {
          if (!wildcardAnswers) return;
          const input = document.querySelector(`#wildcard-tab-content .wildcard-input[data-field="${field}"]`);
          const correctValue = String(wildcardAnswers[field]);
          const isCorrect = input.value.trim() === correctValue;
          const statusEl = input.closest('.flex').querySelector('.status-icon');
          input.classList.toggle('field-correct', isCorrect);
          input.classList.toggle('field-incorrect', !isCorrect);
          statusEl.innerHTML = isCorrect
            ? '<svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="sr-only">Correct</span>'
            : '<svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span class="sr-only">Incorrect</span>';
        }

        function showWildcardAnswer(field) {
          if (!wildcardAnswers) return;
          const input = document.querySelector(`#wildcard-tab-content .wildcard-input[data-field="${field}"]`);
          const parent = input.closest('.flex');
          input.value = wildcardAnswers[field];
          checkWildcardField(field);
          parent.querySelector('.wildcard-check-btn')?.classList.add('hidden');
          parent.querySelector('.wildcard-show-btn')?.classList.add('hidden');
        }

        function showAllWildcardAnswers() {
            ['wildcard', 'firstHost', 'lastHost', 'totalHosts'].forEach(showWildcardAnswer);
        }

        function checkAllWildcardAnswers() {
            ['wildcard', 'firstHost', 'lastHost', 'totalHosts'].forEach(field => {
                const input = document.querySelector(`#wildcard-tab-content .wildcard-input[data-field="${field}"]`);
                if (input?.value.trim()) checkWildcardField(field);
            });
        }
        
        function showSubnetList(info) {
            const contentEl = document.getElementById('subnet-list-content');
            let html = '<div class="space-y-2">';
            let currentNetwork = info.network;
            for (let i = 0; i < 20; i++) {
                const subnetInfo = SubnetMath.calculateSubnetInfo(currentNetwork, info.cidr);
                if (!subnetInfo) break;
                html += `
                <div class="p-3 bg-gray-50 rounded-lg">
                    <div class="font-mono font-bold text-blue-600">${subnetInfo.network} /${subnetInfo.cidr}</div>
                    <div class="text-xs text-gray-600">${subnetInfo.firstHost} - ${subnetInfo.lastHost}</div>
                </div>`;
                currentNetwork = SubnetMath.getNextSubnet(currentNetwork, info.cidr);
                if (currentNetwork === info.network || currentNetwork === '0.0.0.0') break;
            }
            html += '</div>';
            contentEl.innerHTML = html;
        }

        function updateCalculator() {
          const info = getCalculatorInfo();
          if (!info) return;
          document.getElementById('calc-class').textContent = `Class ${info.classType}`;
          const defaultCidr = info.classType === 'A' ? 8 : info.classType === 'B' ? 16 : 24;
          const subnets = Math.pow(2, Math.max(0, info.cidr - defaultCidr));
          document.getElementById('calc-subnets').textContent = subnets.toLocaleString();
          document.getElementById('calc-hostbits').textContent = info.hostBits;
          document.getElementById('calc-totalhosts').textContent = info.totalHosts.toLocaleString();
          document.getElementById('calc-usablehosts').textContent = info.usableHosts.toLocaleString();
          document.getElementById('calc-network').textContent = info.network;
          document.getElementById('calc-mask').textContent = info.mask;
          document.getElementById('calc-wildcard').textContent = info.wildcard;
          document.getElementById('calc-firsthost').textContent = info.firstHost;
          document.getElementById('calc-lasthost').textContent = info.lastHost;
          document.getElementById('calc-broadcast').textContent = info.broadcast;
          const ip = document.getElementById('calc-ip').value;
          if (SubnetMath.isValidIp(ip)) {
            document.getElementById('calc-binary-ip').textContent = SubnetMath.ipToBinary(ip);
            document.getElementById('calc-binary-mask').textContent = SubnetMath.ipToBinary(info.mask);
            document.getElementById('calc-binary-network').textContent = SubnetMath.ipToBinary(info.network);
          }
        }

        function getCalculatorInfo() {
          const ip = document.getElementById('calc-ip').value;
          const cidr = parseInt(document.getElementById('calc-cidr').value, 10);
          if (!SubnetMath.isValidIp(ip) || isNaN(cidr) || cidr < 8 || cidr > 30) return null;
          return SubnetMath.calculateSubnetInfo(ip, cidr);
        }

        // --- Flashcard Logic ---
        function getEyeIconHTML() {
            return `<svg xmlns="http://www.w3.org/2000/svg" class="fc-icon fc-icon-left" viewBox="0 0 20 20" fill="currentColor"><path d="M10 12a2 2 0 100-4 2 2 0 000 4z" /><path fill-rule="evenodd" d="M.458 10C3.732 4.943 9.522 3 10 3s6.268 1.943 9.542 7c-3.274 5.057-9.064 7-9.542 7S3.732 15.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd" /></svg>`;
        }
        function getRefreshIconHTML() {
            return `<svg xmlns="http://www.w3.org/2000/svg" class="fc-icon fc-icon-left" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 110 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd" /></svg>`;
        }
        
        function setFlashcardDifficulty(difficulty) {
            currentFlashcardDifficulty = difficulty;
            document.querySelectorAll('.fc-difficulty-button').forEach(btn => {
                const isActive = btn.dataset.difficulty === difficulty;
                btn.classList.toggle('active', isActive);
            });
            handleNextFlashcard();
        }

        function getNextCard(difficulty, currentCard) {
            const filteredCards = FLASHCARD_DATA.filter(card => card.difficulty === difficulty);
            if (filteredCards.length === 0) return null;
            let newCards = filteredCards;
            if (currentCard) {
                newCards = filteredCards.filter(card => card.question !== currentCard.question);
            }
            if (newCards.length === 0) {
                newCards = filteredCards;
            }
            const randomIndex = Math.floor(Math.random() * newCards.length);
            return newCards[randomIndex];
        }

        function handleRevealFlashcard() {
            if (!currentFlashcard) return;
            isFlashcardRevealed = !isFlashcardRevealed;
            const inner = document.querySelector('#fc-container .fc-inner');
            inner.classList.toggle('is-revealed', isFlashcardRevealed);
            updateRevealButton();
        }

        function updateRevealButton() {
             const btn = document.getElementById('fc-reveal-btn');
             btn.classList.toggle('revealed-state', isFlashcardRevealed);
             if (isFlashcardRevealed) {
                btn.innerHTML = `${getRefreshIconHTML()} Show Question`;
            } else {
                btn.innerHTML = `${getEyeIconHTML()} Reveal Answer`;
            }
        }
        
        function handleNextFlashcard() {
            const inner = document.querySelector('#fc-container .fc-inner');
            if (isFlashcardRevealed && inner) {
                isFlashcardRevealed = false;
                inner.classList.remove('is-revealed');
                setTimeout(() => {
                    currentFlashcard = getNextCard(currentFlashcardDifficulty, currentFlashcard);
                    updateFlashcardDOM();
                }, 350);
            } else {
                currentFlashcard = getNextCard(currentFlashcardDifficulty, currentFlashcard);
                updateFlashcardDOM();
            }
        }
        
        function updateFlashcardDOM() {
            const container = document.getElementById('fc-container');
            const revealBtn = document.getElementById('fc-reveal-btn');
            const nextBtn = document.getElementById('fc-next-btn');

            if (currentFlashcard) {
                container.innerHTML = `
                    <div class="fc-inner">
                        <div class="fc-card-face fc-card-front">
                            <p>${currentFlashcard.question}</p>
                        </div>
                        <div class="fc-card-face fc-card-back">
                            <p>${currentFlashcard.answer}</p>
                        </div>
                    </div>`;
                revealBtn.disabled = false;
                nextBtn.disabled = false;
            } else {
                container.innerHTML = `<div class="fc-placeholder">Select a difficulty to begin.</div>`;
                revealBtn.disabled = true;
                nextBtn.disabled = true;
            }
            updateRevealButton();
        }

        function toggleTheme() {
          isDarkMode = !isDarkMode;
          document.body.classList.toggle('dark-mode', isDarkMode);
          document.getElementById('theme-icon-light').classList.toggle('hidden', isDarkMode);
          document.getElementById('theme-icon-dark').classList.toggle('hidden', !isDarkMode);
          localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
        }

        function loadTheme() {
          if (localStorage.getItem('theme') !== 'light') {
            isDarkMode = true;
            document.body.classList.add('dark-mode');
            document.getElementById('theme-icon-light').classList.add('hidden');
            document.getElementById('theme-icon-dark').classList.remove('hidden');
          }
        }
    </script>
</body>
</html>
